var NetFunnel={};NetFunnel.Skin={};NetFunnel.TS_HOST="zam.melon.com";NetFunnel.TS_PORT=443;NetFunnel.TS_PROTO="https";NetFunnel.TS_QUERY="ts.wseq";NetFunnel.TS_SERVICE_ID="service_2";NetFunnel.TS_ACTION_ID="mwlogin";NetFunnel.TS_MAX_TTL=30;NetFunnel.TS_CONN_TIMEOUT=3;NetFunnel.TS_CONN_RETRY=2;NetFunnel.TS_COOKIE_ID="NetFunnel_ID";NetFunnel.TS_COOKIE_TIME=10;NetFunnel.TS_COOKIE_DOMAIN=".melon.com";NetFunnel.TS_BYPASS=false;NetFunnel.TS_POPUP_TOP=false;NetFunnel.TS_POPUP_LEFT=false;NetFunnel.TS_AUTO_COMPLETE=true;NetFunnel.TS_DEBUG_MODE=false;NetFunnel.TS_SHOWTIME_LIMIT=0;NetFunnel.TS_SHOWCNT_LIMIT=0;NetFunnel.TS_SHOWNEXT_LIMIT=0;NetFunnel.TS_LIMIT_TEXT="다수";NetFunnel.TS_IFRAME_RESIZE=false;NetFunnel.TS_USE_UNFOCUS=true;NetFunnel.TS_VIRT_WAIT=10000;NetFunnel.TS_USE_MOBILE_UI=false;NetFunnel.TS_POPUP_TARGET=window;NetFunnel.TS_USE_FRAME_BLOCK=false;NetFunnel.TS_FRAME_BLOCK_LIST=[];NetFunnel.TS_USE_PRE_WAIT=false;NetFunnel.TS_USER_DATA_KEYS=[];NetFunnel.TS_CONFIG_USE=false;NetFunnel.TS_POPUP_ZINDEX=32000;NetFunnel.TS_IP_ERROR_RETRY=true;NetFunnel.TS_NWAIT_BYPASS=true;NetFunnel.TS_MAX_NWAIT_COUNT=100;NetFunnel.TS_BLOCK_MSG="Service Block!!";NetFunnel.TS_BLOCK_URL="";NetFunnel.TS_IPBLOCK_WAIT_COUNT=20;NetFunnel.TS_IPBLOCK_WAIT_TIME=10000;NetFunnel.TS_SHOW_WAIT_POPUP=false;NetFunnel.TS_SKIN_ID="";NetFunnel.MP_USE=false;NetFunnel.MP_TIMELIMIT=20000;NetFunnel.MP_MAXREQLIMIT=NetFunnel.MP_TIMELIMIT/1100;NetFunnel.MP_DEVLIMIT=20;NetFunnel.MP_DEVCNTLIMIT=7;NetFunnel.MP_REQONLYLIMIT=10;NetFunnel.MP_MINCOUNT=5;NetFunnel.gLogoData="R0lGODlhJgAQAOe/AB5vlR5ykh9zkyNymCF0lC1xkiN1lSR2liZ3lyd4mDN1lyh5mSp6mjN4lCt7my18nDh5myt+mC59nTd7ly9+njF/nzp+mjKAoDt/mzOBoT+CnkCDn0KFoUOGokSHo0iLpk+SrlSWsl2ZsF6asWeYsWCbsmGcs2OetWSftla4Q1e5RFi6RVm7Rl+6TWK6RnaowXuou3WqvHipwmG8TmS9SGK9T2W+SWq8T2O+UH6rvmS/UX+sv2y+UWXAUoCtwIKuwYOvw4SwxIWxxW/DXYayxnfCXYezx3XDZXbEZom1yY21w4q2you4y3rIaXvJao67zoLKcpq6yonJcpe/zZu/1IrNfY3Nd6C/z5zA1ZrC0KHA0I7QgJ/D2KPD04/SgZbQgZDTgqPH0KbG1pbUiqvH0azM3LDM16PZkaLamLPP2q7Zn7bS3KncobfT3bHcorrW4LnfrbPirrrgrsTY5Lvhr7jkqsba5rzjsLrkt73kscjc6Mvc4rzluMzd49Dg59Hh6MfpvtLi6dPk6s3qxtfk5dTl687rx9Xm7Nbn7dPrz9Ts0Nfo79Xt0dnp8N3q69fv097r7OHq8uXq7d/s7eDt7uDw1ePs9Obs7uTt9eft79/y3uLw8Onu8ODz3+vw8+H14Ozx9O3y9er14u306e7z9uj26u/26+/19+n46/D37PD2+PL3+fL57vP4+/T67/T5/Pf59vX6/fj69/L89/X88Pn7+Pr8+ff9//v9+v78///9+//9//n///z/+/7//P///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////yH5BAEKAP8ALAAAAAAmABAAAAj+AH2hSuXLl61SsHzp8pVLIcOHBSNKnDgxFY8VnXwlckHH1y2PBiuJakixZElUOlrocGWoBRxfuBS58vWpxRZbJnNKRKXSpqIWdB6x0JFCUZMWKhjpXMrTypkUTlzgWXHkjgsko3R4wbk0J08ovoq0aMEmxZAvW6rM0jGmq05TOqT4MpWiBR8oLfL0UOPqxphbC91SnFUHUMFHcTTJcgMGjShccgYtDUyxYSguWq5EWdXFjq9WWNp4mlJG4ZwrqvRcQVRQTBZfUbRkyULqDZWEug5RcLAAACUIQHxBIkAiUIIFYXz9cHApyQQJBT1Q8CVAwgIGiGAgIJXrlu4RBgXsUQjiKxKBEn8WOMCgCgiDS0okMBDhSzp1AxFjbGd4SH4BDpFQENwkBIzwBwIgSLCBD+8lIcEHC6TxwXQBSCCAAZ68gMApBenmQRBPIEIBDL40ct6BP5AhQQUMSLKEBH5wsGIFvgzQgBFCvCLDhgyJWEJBjkigQRonJADDHwns4EsIDDBASRIR9AGKBBNMJ4ACa5jRSgwM/EAEJIhcYEJEKEhgpgaq9OHADwVxQAEmTFDQhy9lLJCBLwdYQIEFjeRAwZ973LIJKBI5QkghqtwSSyYc+kIKJ7eowkktH2XCiS+WcKKpLadomkksAQEAOw==";NetFunnel.gLogoText="";NetFunnel.gLogoURL="http://www.netfunnel.co.kr";NetFunnel.gPreWaitData="R0lGODlhKAAoALMMAPj4+MTExPT09NTU1NPT08XFxcbGxsLCwtXV1cPDw/X19b+/v////wAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBQAMACwAAAAAKAAoAAAEgJDJSau9OOvNu/9gKI5kaZ5oqq5sCwKIYSAABcv0qQRLvwQCyc73C5YGxB5BgkwuS4nk4iCJJqlQKdZKxJII0ifYaRLwfECJmZg2AQaFwqA2ecfnrry+dJvR80NoRi5NRE8uXD5eLYk9iyxjhnprgnt2cn97mpucnZ6foKGio3oRACH5BAkFAAwALAAAAAAoACgAAASAkMlJq7046827/2AojmRpnmiqrmwLAohhIAAFy/SpBEu/BALJzvcLlgbEHkGCTC5LieTiIIkmqVAp1krEkgjSJ9hpEvB8QImZmDYBBoXCoDZ5x+euvP4Vm9HzQ2hGLk1ETy5cPl4tiT2LLGOGemuCe3Zyf3uam5ydnp+goaKjnREAIfkECQUADAAsAAAAACgAKAAABICQyUmrvTjrzbv/YCiOZGmeaKqubAsCiGEgAAXL9KkES78EAsnO9wuWBsQeQYJMLkuJ5OIgiSapUCnWSsSSCNIn2GkS8HxAiZmYNgEGhcKgNnnH5668fnOb0fNDaEYuTURPLlw+Xi2JPYssY4Z6a4J7dnJ/e5qbnJ2en6ChoqOiEQAh+QQJBQAMACwAAAAAKAAoAAAEgJDJSau9OOvNu/9gKI5kaZ5oqq5sCwKIYSCAOynBoi+BYDOD3Y7wSwh1h+JxkbQRlkQJTEY7CXK7ngQn1JoAg0JhUJMEj1GX8dhUL9uk6azMeKJN3KyPce3uSWdCaWBiZCdrQnAsiDuKK3aCP316PwyEY3SVmpucnZ6foKGio6IRACH5BAkFAAwALAAAAAAoACgAAAR9kMlJq7046827/2AojmRpnmiqrmwLAohhIIA7KcGiL4FgM4PdjvBLCHWH4nGRtBGWRJsgt+v9GIBBoTCoXb/gDUxGo4xn3hJOaGWsq75S8BidC6Mk47GpFzbzS3yBJk90EoV3JlNscYtwJ1lbXWZaXGlhmJmam5ydnp+goBEAIfkECQUADAAsAAAAACgAKAAABH2QyUmrvTjrzbv/YCiOZGmeaKqubFsCiGEggDspwaIvgWAzg92O8EsIdYficZG0EZZEmyC36/0YgEGhMKhdv2ALTEajjGfeEk5oZayrvlLwGJ0LoyTjsakXNvNLfIEmT3QShXcmU2xxi3AnWVtdZlpcaWGYmZqbnJ2en6CgEQAh+QQJBQAMACwAAAAAKAAoAAAEfZDJSau9OOvNu/9gKI5kaZ5oqq5sqwKIYSCAOynBoi+BYDOD3Y7wSwh1h+JxkbQRlkSbILfr/RiAQaEwqF2/YGxs5pXAZLQTTmhlrKu+UvAYnQujJOOxqRc280t8gSZPdBKFdyZTbHGLcCdZW10UkVxlYZiZmpucnZ6foKARACH5BAUFAAwALAAAAAAoACgAAASBkMlJq7046827/2AojmRpnmiqrmyrAohhIIA7KcGiL4FgM4PdjvBLCHWH4nGRNMFktAlhSSzhhD2JILfLloLHKgMwKBQGNZPx2HSthe3WNDx5ztKlLdbHuHb5JWRmaBNgQmItbztxLIpIP3OHP3p/P2NlZ3iWm5ydnp+goaKjpD8RADs=";NetFunnel.gFixelData="R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==";NetFunnel.RTYPE_NONE=0;NetFunnel.RTYPE_CHK_ENTER=5002;NetFunnel.RTYPE_ALIVE_NOTICE=5003;NetFunnel.RTYPE_SET_COMPLETE=5004;NetFunnel.RTYPE_GET_TID_CHK_ENTER=5101;NetFunnel.RTYPE_INIT=5105;NetFunnel.RTYPE_STOP=5106;NetFunnel.kSuccess=200;NetFunnel.kContinue=201;NetFunnel.kContinueDebug=202;NetFunnel.kTsBypass=300;NetFunnel.kTsBlock=301;NetFunnel.kTsIpBlock=302;NetFunnel.kTsExpressNumber=303;NetFunnel.kTsErrorNoUservice=500;NetFunnel.kTsErrorNoAction=501;NetFunnel.kTsErrorAComplete=502;NetFunnel.kTsErrorWrongServer=503;NetFunnel.kTsErrorTooRecreate=504;NetFunnel.kTsErrorNoKey=505;NetFunnel.kTsErrorInvalidID=506;NetFunnel.kTsErrorInvalidKey=507;NetFunnel.kTsErrorInvalidIdStr=508;NetFunnel.kTsErrorDuplicate=509;NetFunnel.kTsErrorDelAction=510;NetFunnel.kTsErrorUserviceExist=511;NetFunnel.kTsErrorActionExist=512;NetFunnel.kTsErrorLicenseOver=513;NetFunnel.kTsErrorSize=514;NetFunnel.kTsErrorNoUserAction=515;NetFunnel.kTsErrorTooBigKey=516;NetFunnel.kTsErrorInvalidIp=517;NetFunnel.kErrorAuth=900;NetFunnel.kErrorNotFound=901;NetFunnel.kErrorNoinit=902;NetFunnel.kErrorCode=903;NetFunnel.kErrorParam=904;NetFunnel.kErrorData=905;NetFunnel.kErrorUnknownType=906;NetFunnel.kErrorAlready=907;NetFunnel.kErrorService=908;NetFunnel.kErrorExecution=909;NetFunnel.kErrorSock=920;NetFunnel.kErrorSockSend=921;NetFunnel.kErrorSockRecv=922;NetFunnel.kErrorNotFoundLocalIP=925;NetFunnel.kErrorSockConnect=926;NetFunnel.kErrorNoConnect=927;NetFunnel.kErrorSockData=928;NetFunnel.kErrorIO=991;NetFunnel.kErrorArunning=992;NetFunnel.kErrorPermission=993;NetFunnel.kErrorExpiredTime=994;NetFunnel.kErrorOverCounter=995;NetFunnel.kErrorSecurity=996;NetFunnel.kErrorSystemStopping=997;NetFunnel.kErrorNotSupport=998;NetFunnel.kErrorSystem=999;NetFunnel.PS_N_RUNNING=0;NetFunnel.PS_RUNNING=1;NetFunnel.PS_CONTINUE=2;NetFunnel.PS_TIMEOUT=3;NetFunnel.PS_ERROR=99;NetFunnel.CONN_TIMEOUT_KEY="connection_timeout";NetFunnel.gControl=null;NetFunnel.gShowtimeLimit=false;NetFunnel.gShowcntLimit=false;NetFunnel.gShownextLimit=false;NetFunnel.gSkinId="";NetFunnel.gPopupTop=false;NetFunnel.gPopupLeft=false;NetFunnel.gTotWait=-1;NetFunnel.gPrevWaitTime=-1;NetFunnel.gLastSkinID="default";NetFunnel.gUseMobileUI=false;NetFunnel.gUseUnfocus=false;NetFunnel.gAlreadyProc=0;NetFunnel.gWaitPop=null;NetFunnel.gIPBlockWaitCount=0;NetFunnel.gNWaitCount=0;NetFunnel.gNWaitTemp=0;NetFunnel.gReTimer=null;NetFunnel.gDebugflag=false;NetFunnel.Util={makeDebugMsg:function(i,m,t,q,s){var u="\n";var v="       ";if(s==true){u="<br>";v="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"}var n="Unknown";var o="Unkonwn Error";switch(m){case NetFunnel.RTYPE_GET_TID:n="getTicketID";break;case NetFunnel.RTYPE_CHK_ENTER:n="chkEnter";break;case NetFunnel.RTYPE_ALIVE_NOTICE:n="aliveNotice";break;case NetFunnel.RTYPE_SET_COMPLETE:n="setComplete";break;case NetFunnel.RTYPE_GET_TID_CHK_ENTER:n="getTID+ChkEnter";break;case NetFunnel.RTYPE_INIT:n="Init";break;case NetFunnel.RTYPE_STOP:n="stop";break;default:n="Unknown";break}switch(t){case NetFunnel.kSuccess:o="Normal";break;case NetFunnel.kContinue:o="Continue";break;case NetFunnel.kContinueDebug:o="Debug Continue mode";break;case NetFunnel.kTsBypass:o="ServerSide Bypass";break;case NetFunnel.kTsBlock:o="ServerSide Block";break;case NetFunnel.kTsIpBlock:o="ServerSide Ip Block";break;case NetFunnel.kErrorSystem:o="System Error";break;case NetFunnel.kErrorSecurity:o="Security Error";break;case NetFunnel.kErrorIO:o="I/O Error";break;case NetFunnel.kErrorSockConnect:o="Connection Timeout";break;case NetFunnel.kErrorAlready:o="Already Running";break;case NetFunnel.kErrorNoinit:o="Init Error";break;case NetFunnel.E_INSERT:o="Insert Error";break;case NetFunnel.kErrorPermission:o="No Permission";break;case NetFunnel.kErrorExpiredTime:o="Key Expire";break;case NetFunnel.kErrorParam:o="Parameter Error";break;case NetFunnel.E_NOT_STARTED:o="No service time";break;case NetFunnel.kTsErrorNoUserAction:o="No action Error";break;default:o="Unknown Error";break}var p=i+" "+u+u+"  - type : "+n+" ("+m+")"+u+" - Code : "+o+" ("+t+")"+u+" - Params"+u;for(var r in q){p+=v+r+" ---> "+q[r]+u}return p},goNextPage:function(e,g){var f=e;for(var h in g){f+="&"+h+"="+g[h]}document.location.href=f},alertDebugMsg:function(b){alert(b)},decodeBase64:function(s){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var v="";var i,n,p;var m,o,q,r;var t=0;s=s.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{m=u.indexOf(s.charAt(t++));o=u.indexOf(s.charAt(t++));q=u.indexOf(s.charAt(t++));r=u.indexOf(s.charAt(t++));i=(m<<2)|(o>>4);n=((o&15)<<4)|(q>>2);p=((q&3)<<6)|r;v+=String.fromCharCode(i);if(q!=64){v+=String.fromCharCode(n)}if(r!=64){v+=String.fromCharCode(p)}}while(t<s.length);return v},getParam:function(f){f=f.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+f+"=([^&#]*)";var g=new RegExp(e);var h=g.exec(document.location.href);if(h===null){return""}return h[1]},isSmartPhone:function(){var d=["iPhone","iPod","iPad","BlakBerry","Android","WindowsCE","LG","MOT","SAMSUNG","SonyEricsson","Nokia","Webos","Opera mini","Opera mobi","Iemobile"];try{for(var e=0;e<d.length;e++){if(navigator.userAgent.match(d[e])!==null){return true}}}catch(f){}return false},calcStdDev:function(j,k){if(typeof j!="object"){return false}if(j.length<2){return false}if(k>1||k<0){k=0}var l=0,m=0;for(m=0;m<j.length;m++){l+=parseInt(j[m],10)}var i=l/j.length;var h=0;for(m=0;m<j.length;m++){h+=((parseInt(j[m],10)-i)*(parseInt(j[m],10)-i))}var n=Math.sqrt(h/(j.length-k));return n},delFocus:function(i){try{var j=document;if(typeof i=="object"&&typeof i.document=="object"){j=i.document}var e=j.getElementsByTagName("body")[0];var h=j.createElement("iframe");h.style.position="absolute";h.style.width="0px";h.style.height="0px";h.style.border="0px";h.style.top=NetFunnel.PopupUtil.getScrollTop(j);h.style.left=NetFunnel.PopupUtil.getScrollLeft(j);e.appendChild(h);h.focus();var l=h.parentNode;if(l&&typeof l=="object"){l.removeChild(h)}}catch(k){}},isVirtualWait:function(b){if(typeof b!="object"){return false}if(typeof b.mprotect=="number"&&b.mprotect>0){return true}return false},getTimeStr:function(af,V,i,ak){var ai=parseInt(af,10);if(typeof V=="undefined"){V="%H시간 %M분 %S초"}if(typeof i=="undefined"){i=" "}if(typeof ak=="undefined"){ak=false}var ae=0;var aj=0;var Y=0;var X=0;var k=false;var s=false;var S=false;var N=false;var T=false;var R=V.match(/%[-]*[0-9]*[H|M|S]/g);for(X=0;X<R.length;X++){k=R[X];s=k.charAt(k.length-1);if(s=="H"){S=true}if(s=="M"){N=true}if(s=="S"){T=true}}if(S==true){aj=Math.floor(ai/3600)}if(N==true){if(S==true){ae=Math.floor((ai%3600)/60)}else{ae=Math.floor(ai/60)}}if(T==true){if(S==false&&N==false){Y=ai}else{if(N==true){Y=ai%60}else{if(S==true&&N==false){Y=Math.floor(ai%3600)}}}}var aa="";var P=V.split(i);for(var W=0;W<P.length;W++){var ad=P[W];R=ad.match(/%[-]*[0-9]*[H|M|S]/g);var h=true;for(X=0;R&&X<R.length;X++){k=R[X];var ac="";var O=false;var ah="&nbsp;";var al=false;var Q=0;s=k.charAt(k.length-1);if(k.length>2){var Z="";var ag=true;for(var ab=1;ab<k.length-1;ab++){var j=k[ab];if(j=="-"){al=true}else{if(j=="0"&&ag==true){ah="0";ag=false;O=true}else{Z+=j;O=true}}}Q=parseInt(Z,10)}var m="";if(s=="H"){if(aj==0){h=false}m=""+aj}else{if(s=="M"){if(ae==0){h=false}m=""+ae}else{if(s=="S"){m=""+Y}}}if(O){if(al){ac=m}var U=Q-m.length;for(var l=0;l<U;l++){ac+=ah}if(!al){ac+=m}}else{ac=m}ad=ad.replace(k,ac)}if(ak==true||h==true){if(aa.length>0){aa=aa+i+ad}else{aa=ad}}}return aa},getFrameWindowList:function(g){var h=[];for(var f=0;f<top.frames.length;f++){var e=top.frames[f];if(e===g){continue}h.push({win:e,popup:null})}return h}};NetFunnel.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(g){for(var f=0;f<g.length;f++){var e=g[f].string;var h=g[f].prop;this.versionSearchString=g[f].versionSearch||g[f].identity;if(e){if(e.indexOf(g[f].subString)!=-1){return g[f].identity}}else{if(h){return g[f].identity}}}return""},searchVersion:function(c){var d=c.indexOf(this.versionSearchString);if(d==-1){return 0}return parseFloat(c.substring(d+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};NetFunnel.BrowserDetect.init();if(NetFunnel.BrowserDetect.browser=="Explorer"){if(typeof Array.push!="function"){Array.prototype.push=function(){var c=this.length>>>0;for(var d=0;d<arguments.length;d++){this[c]=arguments[d];c=c+1>>>0}this.length=c;return c}}if(typeof Array.pop!="function"){Array.prototype.pop=function(){var c=this.length>>>0,d;if(c){d=this[--c];delete this[c]}this.length=c;return d}}}NetFunnel.getCommandStr=function(i,j){var l="";var g=0;if(i=="recv"){g=parseInt(j.substring(0,4),10)}else{var k=/opcode=([0-9]+)&/;var h=k.exec(j);if(h.length>1){g=parseInt(h[1],10)}}switch(g){case 5101:l="getTidchkEnter";break;case 5002:l="chkEnter      ";break;case 5003:l="aliveNotice   ";break;case 5004:l="setComplete   ";break;default:l="Unknown       "}return l};NetFunnel.writeDebugMsg=function(p,q,v){var n=new Date();var u=parseInt(n.getHours(),10);var t=parseInt(n.getMinutes(),10);var o=parseInt(n.getSeconds(),10);var x=parseInt(n.getMilliseconds(),10);var s="";if(u<10){s+="0"}s+=u+":";if(t<10){t+="0"}s+=t+":";if(o<10){o+="0"}s+=o;s+="."+x;var r="";var w="";var d="";if(q=="recv"){r="padding-left:1px;";w="#9E9E9E;";d=s+" | Recv | <b>"+NetFunnel.getCommandStr(q,v)+"</b> | "}else{r="margin-top:5px;";w="#EEEEEE;";d=s+" | Send | <b>"+NetFunnel.getCommandStr(q,v)+"</b> | "}p.document.write("<div onload='this.focus()' style='width:650;overflow:hidden;padding:1px;border:1px solid #eeeeee;margin:0px;font-size:10px;font-family:monospace;background-color:"+w+r+"'>"+d+v.substring(0,50)+"</div>")};NetFunnel.printDebugMsg=function(f,e,d){NetFunnel.debugWindow=window.open("","NetFunnel_debugWindow","status=1,width=700,height=300,resizable=1,scrollbars=1");if(typeof NetFunnel.debugWindow=="object"){NetFunnel.writeDebugMsg(NetFunnel.debugWindow,f,e)}};NetFunnel.Storage=function(b){this.html5Support=this.supportsHtml5Storage();if(typeof b=="number"){this.type=b}};NetFunnel.Storage.prototype.supportsHtml5Storage=function(){try{return"localStorage" in window&&window.localStorage!==null}catch(b){return false}};NetFunnel.Storage.prototype.html5Support=false;NetFunnel.Storage.prototype.length=0;NetFunnel.Storage.prototype.type=1;NetFunnel.Storage.prototype.setStorageType=function(b){if(b<1||b>2){this.type=1}else{this.type=b}};NetFunnel.Storage.prototype.getStorage=function(){if(this.type==1){return localStorage}else{if(this.type==2){return sessionStorage}}return localStorage};NetFunnel.Storage.prototype.setItem=function(e,i,g,j){try{if(this.html5Support){this.getStorage().setItem(e,i);NetFunnel.Cookie.set(e,i,g,j)}else{NetFunnel.Cookie.set(e,i,g,j)}return true}catch(h){return false}};NetFunnel.Storage.prototype.setItemStorageOnly=function(e,i,g,j){try{if(this.html5Support){this.getStorage().setItem(e,i)}else{NetFunnel.Cookie.set(e,i,g,j)}return true}catch(h){return false}};NetFunnel.Storage.prototype.getItem=function(e,h){var f=false;try{if(this.html5Support){f=this.getStorage().getItem(e);if(!f&&(h==undefined||h==false)){f=NetFunnel.Cookie.get(e)}}else{f=NetFunnel.Cookie.get(e)}return f}catch(g){return false}};NetFunnel.Storage.prototype.removeItem=function(e,d){try{if(this.html5Support){this.getStorage().removeItem(e);if(d==undefined||d==false){NetFunnel.Cookie.del(e)}}else{NetFunnel.Cookie.del(e)}return true}catch(f){return false}};NetFunnel.Storage.prototype.clear=function(){try{if(this.html5Support){this.getStorage().clear()}return true}catch(b){return false}};NetFunnel.MProtect=function(){try{var F=new NetFunnel.Storage();var D=new Date();var u=D.getTime();var w=F.getItem("NFMPT.data",true);if(w===null){w=""}var C=F.getItem("NFMPT.stdData",true);if(C===null){C=""}var E=parseInt(F.getItem("NFMPT.lastTime",true),10);if(isNaN(E)||E===null||E==""){E=0}var e=parseInt(F.getItem("NFMPT.reqCnt",true),10);if(isNaN(e)||e===null||e==""){e=0}var v=[];var y=[];if(w!=""){v=w.split(",")}if(C!=""){y=C.split(",")}if(E!=0){v[v.length]=u-E;y[y.length]=u-E}E=u;var x=v.length-1;var A=0;for(;x>=0;x--){A+=parseInt(v[x],10);if(A>NetFunnel.MP_TIMELIMIT){break}}var z=y.length-NetFunnel.MP_DEVCNTLIMIT;if(z<0){z=0}var i=y.slice(z);var B=v.slice(x+1);F.setItemStorageOnly("NFMPT.data",B.join(","));F.setItemStorageOnly("NFMPT.stdData",i.join(","));F.setItemStorageOnly("NFMPT.lastTime",E+"");F.setItemStorageOnly("NFMPT.reqCnt",(++e)+"");var j=NetFunnel.Util.calcStdDev(i,0);if(j!=false&&j<NetFunnel.MP_DEVLIMIT){return 2}if(B.length<NetFunnel.MP_MINCOUNT){return 0}if(B.length+1>NetFunnel.MP_MAXREQLIMIT){return 1}if(e>NetFunnel.MP_REQONLYLIMIT){F.setItemStorageOnly("NFMPT.reqCnt","0");return 3}}catch(t){}return 0};NetFunnel.ProgressBar=function(m,n,l){this._bar=null;this._bar2=null;this._config={};this._totWaitCnt=0;this._wflag=0;if(typeof m=="string"){this._obj=l.getElementById(m)}else{this._obj=m}this._config.width=360;this._config.height=5;this._config.count=50;this._config.interval=50;this._config.color=this._color;this._config.bgcolor=this._bgcolor;this._config.waitchk=0;if(typeof n=="object"){for(var p in n){this._config[p]=n[p]}}if(this._config.count<=0){this._config.count=50}this._oTable=l.createElement("table");this._oTable.style.width=this._config.width+"px";this._oTable.style.height=this._config.height+"px";this._oTable.cellPadding=0;this._oTable.cellSpacing=0;var o=l.createElement("tbody");var k=l.createElement("tr");var j=l.createElement("td");j.style.height=this._config.height+"px";j.style.backgroundColor=this._config.bgcolor;var i=l.createElement("td");i.style.backgroundColor=this._config.bgcolor;k.appendChild(j);k.appendChild(i);o.appendChild(k);this._oTable.appendChild(o);this._obj.appendChild(this._oTable);this._bar=j;this._bar2=i;this.show=function(){this._obj.style.visibility="visible";var a=this;this._timer=setInterval(function(){a._action(0)},this._config.interval);return};this.hide=function(){this._obj.style.visibility="hidden";if(this._timer){clearTimeout(this._timer);this._timer=null}return};this._action=function(){try{if(this._config.waitchk!=0){if(parseInt(this._config.waitchk,10)<parseInt(NetFunnel.gLastData.nwait,10)){NetFunnel.gLastData.nwait=this._config.waitchk}}if(this._wflag==0&&NetFunnel.retryData===null){this._wflag=1}this._oTable.style.width=this._config.width+"px";if(NetFunnel.gTotWait<=0){NetFunnel.gTotWait=NetFunnel.gLastData.nwait}if(parseInt(NetFunnel.gLastData.nwait,10)>parseInt(NetFunnel.gTotWait,10)){NetFunnel.gTotWait=NetFunnel.gLastData.nwait}var c=this._config.width-Math.round((NetFunnel.gLastData.nwait/NetFunnel.gTotWait)*this._config.width);var a=this._config.width-c;this._bar.style.width=c+"px";this._bar.style.backgroundColor=this._config.color;this._bar2.style.width=a+"px";this._bar2.style.backgroundColor=this._config.bgcolor;this._config.waitchk=NetFunnel.gLastData.nwait}catch(b){}return true}};NetFunnel.ProgressBar.prototype._mmm=0;NetFunnel.ProgressBar.prototype._curr=0;NetFunnel.ProgressBar.prototype._direct=0;NetFunnel.ProgressBar.prototype._obj=null;NetFunnel.ProgressBar.prototype._cells=null;NetFunnel.ProgressBar.prototype._timer=null;NetFunnel.ProgressBar.prototype._oTable=null;NetFunnel.ProgressBar.prototype._config=null;NetFunnel.ProgressBar.prototype._color="#2a509b";NetFunnel.ProgressBar.prototype._bgcolor="#b6dffd";NetFunnel.Cookie={set:function(l,j,g,k){var i=l+"="+escape(j);if(typeof g!="undefined"&&(g.constructor==Number)&&g>0){var h=new Date();h.setMinutes(h.getMinutes()+g);i+=";expires="+h.toGMTString()}if(typeof k!="undefined"&&k.constructor==String&&k!=""){i+=";domain="+k}else{if(NetFunnel.TS_COOKIE_DOMAIN!=""){i+=";domain="+NetFunnel.TS_COOKIE_DOMAIN}}i+=";path=/;";document.cookie=i},del:function(b){NetFunnel.Cookie.set(b,"",-1)},get:function(d){if(document.cookie.length>0){var f=document.cookie.indexOf(d+"=");if(f!=-1){f=f+d.length+1;var e=document.cookie.indexOf(";",f);if(e==-1){e=document.cookie.length}return unescape(document.cookie.substring(f,e))}}return""}};NetFunnel.getUrlParameters=function(k){if(typeof k!="string"||k==""){return""}var l="";var m=document.location.href;if(m.indexOf("?")>-1){var n=m.substr(m.indexOf("?"));var j=n.split("&");for(var h=0;h<j.length;h++){if(j[h].indexOf(k+"=")>-1){var i=j[h].indexOf(k+"=")+k.length+1;l=j[h].substr(i);break}}}return unescape(l)};NetFunnel.gPop=null;NetFunnel.gTimer=null;NetFunnel.gLastData=null;NetFunnel.countdown_stop=function(){try{if(!NetFunnel.Util.isVirtualWait(NetFunnel.gLastData)){NetFunnel.gControl.fireEvent(null,NetFunnel.gControl,"onStop",{next:NetFunnel.gControl.next.stop});NetFunnel_sendStop();if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=null}if(NetFunnel.gControl.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.hideBlockList(NetFunnel.gControl.getConfig("frame_block_list"))}}}catch(b){}};NetFunnel.countdown=function(){if(NetFunnel.gLastData&&NetFunnel.gLastData.time_left>=0){if(NetFunnel.gPop){var tTime=NetFunnel.gPop.getObj("NetFunnel_Loading_Popup_TimeLeft");var tCount=NetFunnel.gPop.getObj("NetFunnel_Loading_Popup_Count");var tNext=NetFunnel.gPop.getObj("NetFunnel_Loading_Popup_NextCnt");if(this._gNWaitView!=0){if(parseInt(this._gNWaitView,10)<parseInt(NetFunnel.gLastData.nwait,10)){NetFunnel.gLastData.nwait=this._gNWaitView}}this._gNWaitView=NetFunnel.gLastData.nwait;var tformat="";var tformat_arr=null;var shownext_limit=0;var showcnt_limit=0;if(tCount){showcnt_limit=NetFunnel.gControl.getConfig("showcnt_limit");if(showcnt_limit>0&&NetFunnel.gLastData.nwait>showcnt_limit){tformat=tCount.className;if(tformat.length>0){tCount.innerHTML=tformat}else{tCount.innerHTML=NetFunnel.TS_LIMIT_TEXT}}else{tCount.innerHTML=String(NetFunnel.gLastData.nwait)}}if(tNext){shownext_limit=NetFunnel.gControl.getConfig("shownext_limit");if(NetFunnel.gLastData.nnext==undefined){tNext.innerHTML="0"}else{if(shownext_limit>0&&NetFunnel.gLastData.nnext>shownext_limit){tformat=tNext.className;if(tformat.length>0){tNext.innerHTML=tformat}else{tNext.innerHTML=NetFunnel.TS_LIMIT_TEXT}}else{tNext.innerHTML=String(NetFunnel.gLastData.nnext)}}}if(tTime){var showtime_limit=NetFunnel.gControl.getConfig("showtime_limit");if(showtime_limit>0&&NetFunnel.gLastData.real_time_left>showtime_limit){tformat=tTime.className;tformat_arr=tformat.split("^");if(tformat_arr.length==4&&tformat_arr[3].length>0){tTime.innerHTML=tformat_arr[3]}else{if(tTime.innerHTML.length>=5){tTime.innerHTML="."}else{tTime.innerHTML+="."}}}else{tformat=tTime.className;if(tformat.length>0){tformat_arr=tformat.split("^");tTime.innerHTML=NetFunnel.Util.getTimeStr(NetFunnel.gLastData.real_time_left,tformat_arr[0],tformat_arr[1],eval(tformat_arr[2]))}else{tTime.innerHTML=NetFunnel.Util.getTimeStr(NetFunnel.gLastData.real_time_left)}}}try{if(typeof tTime=="object"){if(tTime.style.textDecoration=="none"){tTime.style.textDecoration="underline"}else{tTime.style.textDecoration="none"}}if(typeof tTime=="object"){if(tNext.style.textDecoration=="none"){tNext.style.textDecoration="underline"}else{tNext.style.textDecoration="none"}}if(typeof tCount=="object"){if(tCount.style.textDecoration=="none"){tCount.style.textDecoration="underline"}else{tCount.style.textDecoration="none"}}}catch(e){}}}if(NetFunnel.gLastData.time_left<=0&&NetFunnel.gTimer){if(NetFunnel.gPop){}return}var left_perc=0;var skinObj=NetFunnel.SkinUtil.get(NetFunnel.gSkinId,NetFunnel.Util.isSmartPhone());if(typeof skinObj.updateCallback=="function"){if(parseInt(NetFunnel.gTotWait,10)<=0){left_perc=0}else{if(parseInt(NetFunnel.gTotWait,10)<parseInt(NetFunnel.gLastData.nwait,10)){NetFunnel.gTotWait=parseInt(NetFunnel.gLastData.nwait,10)}left_perc=parseInt(((NetFunnel.gTotWait-NetFunnel.gLastData.nwait)*100)/NetFunnel.gTotWait,10)}skinObj.updateCallback(left_perc,NetFunnel.gLastData.nwait,NetFunnel.gTotWait,NetFunnel.gLastData.real_time_left,true)}NetFunnel.gLastData.time_left--;var self=this;NetFunnel.gTimer=setTimeout(function(){self.countdown()},500)};NetFunnel.SkinUtil={prevID:"",add:function(g,h,f){try{if(typeof g!="string"||g==""){return false}if(typeof h!="object"){return false}if(typeof f!="string"||f==""){f="normal"}if(typeof NetFunnel.Skin[g]!="object"){NetFunnel.Skin[g]={}}NetFunnel.Skin[g][f]=h;NetFunnel.gLastSkinID=g;return true}catch(e){return false}},get:function(g,f){try{if(typeof g!="string"||g==""){g=NetFunnel.gLastSkinID}var e="normal";if(NetFunnel.gUseMobileUI==true&&f==true){e="mobile"}if(typeof NetFunnel.Skin[g]=="object"&&typeof NetFunnel.Skin[g][e]=="object"){return NetFunnel.Skin[g][e]}if(NetFunnel.TS_SKIN_ID!=""&&NetFunnel.TS_SKIN_ID!=g){if(typeof NetFunnel.Skin[NetFunnel.TS_SKIN_ID]=="object"&&typeof NetFunnel.Skin[NetFunnel.TS_SKIN_ID][e]=="object"){return NetFunnel.Skin[NetFunnel.TS_SKIN_ID][e]}}return NetFunnel.Skin["default"][e]}catch(h){}return NetFunnel.Skin["default"]["normal"]}};NetFunnel.SkinUtil.add("default",{htmlStr:' 			<div id="NetFunnel_Skin_Top" style="background-color:#ffffff;border:1px solid #9ab6c4;overflow:hidden;width:250px;-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px;" > 				<div style="background-color:#ffffff;border:6px solid #eaeff3;-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px;"> 					<div style="text-align:right;padding-top:5px;padding-right:5px;line-height:25px;"> 					</div>					<div style="padding-top:5px;padding-left:5px;padding-right:5px"> 						<div style="text-align:center;font-size:12pt;color:#001f6c;height:22px"><b><span style="color:#013dc1">접속대기 중</span>입니다.</b></div> 						<div style="text-align:right;font-size:9pt;color:#4d4b4c;padding-top:4px;height:17px;" ><b>예상시간 : <span id="NetFunnel_Loading_Popup_TimeLeft" class="%M분 %02S초^ ^false"></span></b></div> 						<div style="padding-top:6px;padding-bottom:6px;vertical-align:center;width:228px" id="NetFunnel_Loading_Popup_Progressbar"></div> 						<div style="background-color:#ededed;padding-bottom:8px;overflow:hidden;width:228px"> 							<div style="padding-left:5px"> 								<div style="text-align:center;font-size:8pt;color:#4d4b4c;padding:3px;padding-top:10px;padding-bottom:10px;height:10px">앞에 <b><span style="color:#2a509b"><span id="NetFunnel_Loading_Popup_Count" class="'+NetFunnel.TS_LIMIT_TEXT+'"></span></span></b> 명, 뒤에 <b><span style="color:#2a509b"><span id="NetFunnel_Loading_Popup_NextCnt" class="'+NetFunnel.TS_LIMIT_TEXT+'"></span></span></b> 명의 대기자가 있습니다.</div> 								<div style="text-align:center;font-size:8pt;color:#4d4b4c;padding:3px;height:12px">현재 접속자가 많아 대기 중이며</div> 								<div style="text-align:center;font-size:8pt;color:#4d4b4c;padding:3px;height:10px;">잠시만 기다리시면</div> 								<div style="text-align:center;font-size:8pt;color:#4d4b4c;padding:3px;height:10px;">서비스로 자동 접속 됩니다.</div> 								<div style="text-align:center;font-size:9pt;color:#2a509b;padding-top:10px;"> 									<b>[<span id="NetFunnel_Countdown_Stop" style="cursor:pointer">중지</span>]</b> 								</div> 							</div> 						</div> 					<div style="height:5px;"></div> 				</div> 			</div>'},"mobile");NetFunnel.tstr='	<div id="NetFunnel_Skin_Top" style="background-color:#ffffff;border:1px solid #9ab6c4;width:458px;-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px;"> 		<div style="background-color:#ffffff;border:6px solid #eaeff3;-moz-border-radius: 5px; -webkit-border-radius: 5px; -khtml-border-radius: 5px; border-radius: 5px;"> 			<div style="text-align:right;padding-top:5px;padding-right:5px;line-height:25px;"> 			<b><span id="NetFunnel_Loding_Popup_Debug_Alerts" style="text-align:left;color:#ff0000"></span></b> 			<span style="text-align:right;"><a href="'+NetFunnel.gLogoURL+'" target="_blank" style="cursor:pointer;text-decoration:none;">';if((NetFunnel.BrowserDetect.browser=="Explorer"&&NetFunnel.BrowserDetect.version=="6")||NetFunnel.gLogoData==""){NetFunnel.tstr+='<b style="font-size:12px;">'+NetFunnel.gLogoText+"</b></a>"}else{NetFunnel.tstr+='<b style="font-size:12px;">'+NetFunnel.gLogoText+'</b><img style="height:16px;color:black;font-size:11px;" border=0 src="data:image/gif;base64,'+NetFunnel.gLogoData+'" ></a>'}NetFunnel.tstr+='</span></div> 			<div style="padding-top:0px;padding-left:25px;padding-right:25px"> 				<div style="text-align:left;font-size:12pt;color:#001f6c;height:22px"><b>서비스 <span style="color:#013dc1">접속대기 중</span>입니다.</b></div> 				<div style="text-align:right;font-size:9pt;color:#4d4b4c;padding-top:4px;height:17px" ><b>예상대기시간 : <span id="NetFunnel_Loading_Popup_TimeLeft" class="%H시간 %M분 %02S초^ ^false"></span></b></div> 				<div style="padding-top:6px;padding-bottom:6px;vertical-align:center;width:400px;height:20px" id="NetFunnel_Loading_Popup_Progressbar"></div> 				<div style="background-color:#ededed;width:400px;padding-bottom:8px;overflow:hidden"> 					<div style="padding-left:5px"> 						<div style="text-align:left;font-size:8pt;color:#4d4b4c;padding:3px;padding-top:10px;height:10px">고객님 앞에 <b><span style="color:#2a509b"><span id="NetFunnel_Loading_Popup_Count" class="'+NetFunnel.TS_LIMIT_TEXT+'"></span></span></b> 명, 뒤에 <b><span style="color:#2a509b"><span id="NetFunnel_Loading_Popup_NextCnt" class="'+NetFunnel.TS_LIMIT_TEXT+'"></span></span></b> 명의 대기자가 있습니다.  </div> 						<div style="text-align:left;font-size:8pt;color:#4d4b4c;padding:3px;height:10px">현재 접속 사용자가 많아 대기 중이며, 잠시만 기다리시면 </div> 						<div style="text-align:left;font-size:8pt;color:#4d4b4c;padding:3px;height:10px;">서비스로 자동 접속 됩니다.</div> 						<div style="text-align:center;font-size:9pt;color:#2a509b;padding-top:10px;"> 							<b>※ 재 접속하시면 대기시간이 더 길어집니다. <span id="NetFunnel_Countdown_Stop" style="cursor:pointer">[중지]</span> </b> 						</div> 					</div> 				</div> 				<div style="height:5px;"></div> 			</div> 		</div> 	</div>';NetFunnel.SkinUtil.add("default",{htmlStr:NetFunnel.tstr},"normal");NetFunnel.PopupSetup=function(i,f,j){if(j===null||j==""){j=NetFunnel.gSkinId}var h=NetFunnel.SkinUtil.get(j,NetFunnel.Util.isSmartPhone());switch(i){case"vcontinue":f.data.nwait=1000000;f.data.ttl="2";f.data.tps=1;break;case"continue":break;case"alert":break;default:break}if(i!="alert"&&typeof f=="object"){NetFunnel.gLastData=f.data;NetFunnel.gLastData.time_left=parseInt(f.data.ttl,10);NetFunnel.gLastData.tps=parseInt(f.data.tps,10);if(NetFunnel.gLastData.tps==0){NetFunnel.gLastData.tps=1}NetFunnel.gLastData.real_time_left=Math.round(parseInt(f.data.nwait,10)/NetFunnel.gLastData.tps);if(NetFunnel.gLastData.real_time_left<1){NetFunnel.gLastData.real_time_left=1}if(NetFunnel.gPrevWaitTime>-1&&NetFunnel.gLastData.real_time_left>NetFunnel.gPrevWaitTime){NetFunnel.gLastData.real_time_left=NetFunnel.gPrevWaitTime}NetFunnel.gPrevWaitTime=NetFunnel.gLastData.real_time_left;if(NetFunnel.gTotWait<0){NetFunnel.gTotWait=NetFunnel.gLastData.nwait}}if(!NetFunnel.gPop){NetFunnel.gPop=new NetFunnel.Popup(h.htmlStr,NetFunnel.gPopupTop,NetFunnel.gPopupLeft,NetFunnel.gControl.getConfig("popup_target"),false,false,NetFunnel.gControl.getConfig("popup_zindex"));if(typeof h.prepareCallback=="function"){h.prepareCallback()}this._gNWaitView=0}NetFunnel.gPop.show();var g=null;if(NetFunnel.gPop.getObj("NetFunnel_Loding_Popup_Debug_Alerts")){if(NetFunnel.gDebugflag){g=NetFunnel.gPop.getObj("NetFunnel_Loding_Popup_Debug_Alerts");g.innerHTML=" Debug Mode "}else{g=NetFunnel.gPop.getObj("NetFunnel_Loding_Popup_Debug_Alerts");g.innerHTML=""}}if(NetFunnel.gControl.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.showBlockList(NetFunnel.gControl.getConfig("frame_block_list"))}if(i!="alert"){NetFunnel.countdown()}};NetFunnel.DefaultCallback={onSuccess:function(d,e,f){if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=true}if(f.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.hideBlockList(f.getConfig("frame_block_list"))}if(typeof e.next=="string"&&e.next!=""){document.location.href=e.next}else{if(typeof e.next=="function"){DefaultCallback_onSuccess(d,e,f)}}NetFunnel.gPop=null},onContinued:function(d,e,f){if(typeof e.next=="string"){document.location.href=e.next;return}if(typeof e.next=="function"){if(e.next(d,e)==false){return}}if(e.rtype==NetFunnel.RTYPE_CHK_ENTER||e.rtype==NetFunnel.RTYPE_GET_TID_CHK_ENTER){if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}NetFunnel.PopupSetup("continue",e,NetFunnel.gSkinId)}},onError:function(d,e,f){if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=null}if(f.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.hideBlockList(f.getConfig("frame_block_list"))}if(typeof e.next=="string"&&e.next!=""){document.location.href=e.next;return}if(typeof e.next=="function"){if(e.next(d,e)==false){return}}},onStop:function(c,d){if(typeof d.next=="string"&&d.next!=""){document.location.href=d.next;return}if(typeof d.next=="function"){if(d.next(c,d)==false){return}}},onBypass:function(d,e,f){if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=null}if(f.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.hideBlockList(f.getConfig("frame_block_list"))}if(typeof e.next=="string"&&e.next!=""){document.location.href=e.next;return}if(typeof e.next=="function"){if(e.next(d,e)==false){return}}},onExpressnumber:function(d,e,f){if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=null}if(f.getConfig("use_frame_block")==true){NetFunnel.PopupUtil.hideBlockList(f.getConfig("frame_block_list"))}if(typeof e.next=="string"&&e.next!=""){document.location.href=e.next;return}if(typeof e.next=="function"){if(e.next(d,e)==false){return}}},onBlock:function(d,e,f){if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}if(NetFunnel.gPop){NetFunnel.gPop.hide();NetFunnel.gPop.destroy();delete NetFunnel.gPop;NetFunnel.gPop=null}if(typeof e.next=="string"&&e.next!=""){document.location.href=e.next;return}if(typeof e.next=="function"){if(e.next(d,e)==false){return}}if(typeof f.getConfig("block_url")!="string"||f.getConfig("block_url")==""){if(f.getConfig("block_msg")==""||typeof f.getConfig("block_msg")!="string"){alert("[NetFUNNEL]Service Block!")}else{alert(f.getConfig("block_msg"))}return}document.location.href=f.getConfig("block_url")},onIpBlock:function(c,d){if(typeof d.next=="string"){document.location.href=d.next;return}if(typeof d.next=="function"){if(d.next(c,d)==false){return}}if(NetFunnel.gTimer){clearTimeout(NetFunnel.gTimer)}NetFunnel.PopupSetup("vcontinue",d,NetFunnel.gSkinId)}};NetFunnel.Event=function(){this.events=[];this.builtinEvts=[]};NetFunnel.Event.prototype.getActionIdx=function(k,n,l,j){if(k&&n){var h=this.events[k][n];if(h){var i=h.length;for(var m=i-1;m>=0;m--){if(h[m].action==l&&h[m].binding==j){return m}}}else{return -1}}return -1};NetFunnel.Event.prototype.addListener=function(i,f,j,h){if(this.events[i]){if(this.events[i][f]){if(this.getActionIdx(i,f,j,h)==-1){var g=this.events[i][f];g[g.length]={action:j,binding:h}}}else{this.events[i][f]=[];this.events[i][f][0]={action:j,binding:h}}}else{this.events[i]=[];this.events[i][f]=[];this.events[i][f][0]={action:j,binding:h}}};NetFunnel.Event.prototype.removeListener=function(i,f,j,h){if(this.events[i]){if(this.events[i][f]){var g=this.actionExists(i,f,j,h);if(g>=0){this.events[i][f].splice(g,1)}}}};NetFunnel.Event.prototype.fireEvent=function(k,l,p,n){if(!k){k=window.event}if(l&&this.events){var o=this.events[l];if(o){var e=o[p];if(e){for(var j=0;e.length>j;j++){var m=e[j].action;if(e[j].binding){m=m.bind(e[j].binding)}m(k,n,l)}}}}};NetFunnel.gPopup=[];NetFunnel.PopupUtil={getViewportHeight:function(c,d){if(c.innerHeight!=c.undefined){return c.innerHeight}if(d.compatMode=="CSS1Compat"){return d.documentElement.clientHeight}if(d.body){return d.body.clientHeight}return c.undefined},getViewportWidth:function(c,d){if(c.innerWidth!=c.undefined){return c.innerWidth}if(d.compatMode=="CSS1Compat"){return d.documentElement.clientWidth}if(d.body){return d.body.clientWidth}return 0},getScrollTop:function(b){if(b.pageYOffset){return b.pageYOffset}else{if(b.documentElement&&typeof b.documentElement.scrollTop=="number"){return b.documentElement.scrollTop}else{if(b.body){return b.body.scrollTop}}}return 0},getScrollLeft:function(b){if(b.pageXOffset){return b.pageXOffset}else{if(b.documentElement&&typeof b.documentElement.scrollLeft=="number"){return b.documentElement.scrollLeft}else{if(b.body){return b.body.scrollLeft}}}return 0},resizePopup:function(){for(var b=0;NetFunnel.gPopup.length>b;b++){NetFunnel.gPopup[b]._centerPopWin()}},getObjWidth:function(c){if(!c){return 0}var d=0;if(parseInt(c.style.width,10)>parseInt(c.offsetWidth,10)){d=parseInt(c.style.width,10)}else{d=c.offsetWidth}return d},getObjHeight:function(c){if(!c){return 0}var d=0;if(parseInt(c.style.height,10)>parseInt(c.offsetHeight,10)){d=parseInt(c.style.height,10)}else{d=c.offsetHeight}return d},showBlockList:function(f){for(var e=0;e<f.length;e++){try{var g=f[e];g.popup=new NetFunnel.Popup("",NetFunnel.gPopupTop,NetFunnel.gPopupLeft,g.win,false,false,NetFunnel.gControl.getConfig("popup_zindex"));g.popup.show()}catch(h){}}},hideBlockList:function(f){for(var e=0;e<f.length;e++){try{var g=f[e];if(g.popup){g.popup.hide();g.popup.destroy();delete g.popup;g.popup=null}}catch(h){}}},hideWaitPopup:function(){if(typeof NetFunnel=="object"){if(NetFunnel.gWaitPop){NetFunnel.gWaitPop.hide();NetFunnel.gWaitPop.destroy();NetFunnel.gWaitPop=null}}},showWaitPopup:function(){if(typeof NetFunnel=="object"){var b='<div style="padding:2px;border:1px solid darkgray;"> 				<table> 					<tr>';if(NetFunnel.BrowserDetect.browser=="Explorer"&&NetFunnel.BrowserDetect.version=="6"){b+="<td></td>"}else{b+='<td><img style="" border=0 src="data:image/gif;base64,'+NetFunnel.gPreWaitData+'" ></td>'}b+='	<td style="valign:middle;font-size:9pt">wait...</td> 					</tr> 				</table> 			</div>';NetFunnel.gWaitPop=new NetFunnel.Popup(b,false,false,NetFunnel.gControl,true,"NetFunnel_Waiting_Popup",NetFunnel.gControl.getConfig("popup_zindex"));NetFunnel.gWaitPop.show()}},getDocumentEntireHeight:function(g){var e=g.body,h=g.documentElement;var f=Math.max(e.scrollHeight,e.offsetHeight,h.clientHeight,h.scrollHeight,h.offsetHeight);return f}};NetFunnel.Popup=function(C,z,E,G,r,A,u){if(typeof G=="object"){this._mWin=G;if(typeof G.document=="object"){this._mDoc=G.document}else{this._mWin=window;this._mDoc=document}}else{this._mWin=window;this._mDoc=document}if(typeof r!="boolean"){r=false}if(typeof A!="string"){A="NetFunnel_Loading_Popup"}if(typeof u!="undefined"&&!isNaN(u)){this._mZindex=u}var t=this._mDoc.getElementsByTagName("BODY")[0];if(!t){return}var F=this._mDoc.getElementById(A);if(!F||NetFunnel.SkinUtil.prevID!=NetFunnel.gSkinId){F=this._mDoc.createElement("div");F.id=A;F.style.display="none";F.style.top=0;F.style.left=0;F.innerHTML=C;t.appendChild(F);var x=this._mDoc.getElementById("NetFunnel_Loading_Popup_Progressbar");if(x){var v={count:50,interval:50};var y=parseInt(x.style.width,10);var w=parseInt(x.style.height,10);if(!isNaN(y)){v.width=y}if(!isNaN(w)){v.height=w}var H=new NetFunnel.ProgressBar(x,v,this._mDoc);H.show();this._mProgress=H}var D=this._mDoc.getElementById("NetFunnel_Countdown_Stop");if(D){D.onclick=NetFunnel.countdown_stop}this.new_draw=true}NetFunnel.SkinUtil.prevID=NetFunnel.gSkinId;var s=this._mDoc.getElementById("mpopup_bg");var B=this._mDoc.getElementById("pop_iframe");if(!s){s=this._mDoc.createElement("div");s.id="mpopup_bg";s.innerHTML="<div style='width:100%; height=100%'>&nbsp;</div>";s.style.position="absolute";s.style.zIndex=(this._mZindex+1);s.style.top="0px";s.style.left="0px";s.style.width="100%";s.style.height=NetFunnel.PopupUtil.getDocumentEntireHeight(this._mDoc)+"px";s.style.margin="0";s.style.padding="0";s.style.border="0px solid black";s.fontSize="0";t.appendChild(s)}if(!B){B=this._mDoc.createElement("iframe");B.id="pop_iframe";B.frameborder="0";B.border="0";B.framespacing="0";B.marginheight="0";B.marginwidth="0";if(r){B.style.opacity="0";B.style.filter="alpha(opacity=0)"}else{B.style.opacity="0.5";B.style.filter="alpha(opacity=50)"}B.style.zIndex=this._mZindex;B.style.top="0px";B.style.left="0px";B.style.width="100%";B.style.height=NetFunnel.PopupUtil.getDocumentEntireHeight(this._mDoc)+"px";B.style.position="absolute";B.style.border="0px solid #FFFFFF";B.style.backgroundColor="#FFFFFF";t=this._mDoc.getElementsByTagName("BODY")[0];t.appendChild(B)}F.style.position="absolute";F.style.visibility="hidden";this._mCount++;this._mMask=s;this._mPopIFrame=B;this._mObj=F;this._mTop=z;this._mLeft=E;this.mid="mpopup_"+this._mCount;this.addListener(this._mWin,"resize",NetFunnel.PopupUtil.resizePopup);NetFunnel.gPopup.push(this)};NetFunnel.Popup.prototype=new NetFunnel.Event();NetFunnel.Popup.prototype._mCount=0;NetFunnel.Popup.prototype._mid="";NetFunnel.Popup.prototype._mWin=window;NetFunnel.Popup.prototype._mDoc=document;NetFunnel.Popup.prototype._mObj=null;NetFunnel.Popup.prototype._mMask=null;NetFunnel.Popup.prototype._mPopIFrame=null;NetFunnel.Popup.prototype._mIsShown=false;NetFunnel.Popup.prototype._mIframeResize=NetFunnel.TS_IFRAME_RESIZE;NetFunnel.Popup.prototype._mProgress=null;NetFunnel.Popup.prototype._mZindex=NetFunnel.TS_POPUP_ZINDEX;NetFunnel.Popup.prototype._setMaskSize=function(){var f=this._mDoc.getElementsByTagName("BODY")[0];if(!f){return}var g=0;if(NetFunnel.Util.isSmartPhone()==true){g=NetFunnel.PopupUtil.getViewportHeight(window,this._mDoc)}else{g=NetFunnel.PopupUtil.getViewportHeight(this._mWin,this._mDoc)}var i=NetFunnel.PopupUtil.getViewportWidth(this._mWin,this._mDoc);var h=0;var j=0;if(g>f.scrollHeight){h=g}else{h=f.scrollHeight}if(i>f.scrollWidth){j=i}else{j=f.scrollWidth}};NetFunnel.Popup.prototype._centerPopWin=function(){if(this._mIsShown){var k=this._mDoc.getElementsByTagName("BODY")[0];if(!k){return}var j;if(NetFunnel.Util.isSmartPhone()==true){j=window}else{if(NetFunnel.BrowserDetect.browser=="Explorer"){j=this._mDoc}else{j=this._mWin}}var h=parseInt(NetFunnel.PopupUtil.getScrollTop(j),10);var l=parseInt(k.scrollLeft,10);this._setMaskSize();var g=0;if(NetFunnel.Util.isSmartPhone()==true){g=NetFunnel.PopupUtil.getViewportHeight(window,this._mDoc)}else{g=NetFunnel.PopupUtil.getViewportHeight(this._mWin,this._mDoc)}var i=NetFunnel.PopupUtil.getViewportWidth(this._mWin,this._mDoc);if(typeof this._mTop=="number"){this._mObj.style.top=this._mTop+"px"}else{this._mObj.style.top=(h+((g-NetFunnel.PopupUtil.getObjHeight(this._mObj))/2))+"px"}if(typeof this._mLeft=="number"){this._mObj.style.left=this._mLeft+"px"}else{this._mObj.style.left=(l+((i-NetFunnel.PopupUtil.getObjWidth(this._mObj))/2))+"px"}if(this._mIframeResize&&typeof this._mPopIFrame=="object"){this._mPopIFrame.style.top=this._mObj.style.top;this._mPopIFrame.style.left=this._mObj.style.left;this._mPopIFrame.style.width=this._mObj.style.width;this._mPopIFrame.style.height=parseInt(this._mObj.style.height,10)+6}}};NetFunnel.Popup.prototype.getObj=function(b){return this._mDoc.getElementById(b)};NetFunnel.Popup.prototype.show=function(){var b=this._mDoc.getElementsByTagName("BODY")[0];if(!b){return}b.style.overflow="auto";this._mObj.style.zIndex=this._mZindex+2;this._mObj.style.visibility="visible";this._mObj.style.display="block";this._mMask.style.visiblity="visible";this._mMask.style.display="block";this._mPopIFrame.style.visiblity="visible";this._mPopIFrame.style.display="block";this._mIsShown=true;this._centerPopWin()};NetFunnel.Popup.prototype.hide=function(){var b=this._mDoc.getElementsByTagName("BODY")[0];if(!b){return}b.style.overflow="auto";this._mObj.style.visibility="hidden";this._mObj.style.display="none";this._mMask.style.visiblity="hidden";this._mMask.style.display="none";this._mPopIFrame.style.visiblity="hidden";this._mPopIFrame.style.display="none";this._mIsShown=false};NetFunnel.Popup.prototype.destroy=function(){var n=this._mDoc.getElementsByTagName("BODY")[0];if(!n){return}var l=NetFunnel.gPopup.length;try{var i=this._mDoc.getElementById("mpopup_bg");n.removeChild(i)}catch(j){}try{var m=this._mDoc.getElementById("pop_iframe");n.removeChild(m)}catch(j){}for(var e=0;e<l;e++){var k=NetFunnel.gPopup.pop();if(k.mid==this.mid){try{n.removeChild(k._mObj)}catch(j){}continue}NetFunnel.gPopup.push(k)}if(this._mProgress){this._mProgress.hide()}};NetFunnel.RetVal=function(b){this._mParam={};this._mRtype=parseInt(b.substr(0,4),10);this._mCode=parseInt(b.substr(5,3),10);this._mRetStr=b.substr(9,b.length-9);this._parse()};NetFunnel.RetVal.prototype._ltrim=function(c){var d=0;for(;d<c.length&&this._isWhitespace(c.charAt(d));d++){}return c.substring(d,c.length)};NetFunnel.RetVal.prototype._rtrim=function(c){var d=c.length-1;for(;d>=0&&this._isWhitespace(c.charAt(d));d--){}return c.substring(0,d+1)};NetFunnel.RetVal.prototype._trim=function(b){return this._ltrim(this._rtrim(b))};NetFunnel.RetVal.prototype._isWhitespace=function(d){var c=" \t\n\r\f";return(c.indexOf(d)!=-1)};NetFunnel.RetVal.prototype._parse=function(){var g="";var j="";var i="";var h=this._mRetStr.split("&");for(var f=0;h.length>f;f++){g=h[f].split("=");if(g.length>1){j=this._trim(g[0]);i=this._trim(g[1]);this._mParam[j]=i}}};NetFunnel.RetVal.prototype.getRetCode=function(){return this._mCode};NetFunnel.RetVal.prototype.setRetCode=function(b){this._mCode=b;return this._mCode};NetFunnel.RetVal.prototype.getReqType=function(){return this._mRtype};NetFunnel.RetVal.prototype.setReqType=function(b){this._mRtype=b;return this._mRtype};NetFunnel.RetVal.prototype.getRetStr=function(){return this._mRetStr};NetFunnel.RetVal.prototype.getValue=function(d){try{return this._mParam[d]}catch(c){return null}};NetFunnel.RetVal.prototype.setValue=function(e,h){var f=null;try{if(this.isKeyExist(e)){f=this.getValue(e)}this._mParam[e]=h;return f}catch(g){return null}};NetFunnel.RetVal.prototype.getNumber=function(d){try{return parseInt(this._mParam[d],10)}catch(c){return 0}};NetFunnel.RetVal.prototype.isKeyExist=function(d){try{if(this._mParam[d]!==null){return true}}catch(c){}return false};NetFunnel.RetVal.prototype.getParam=function(){return this._mParam};NetFunnel.TsClient=function(e,h){this.mConfig={};this.mConfig.host=NetFunnel.TS_HOST;this.mConfig.port=NetFunnel.TS_PORT;this.mConfig.proto=NetFunnel.TS_PROTO;this.mConfig.query=NetFunnel.TS_QUERY;this.mConfig.max_ttl=NetFunnel.TS_MAX_TTL;this.mConfig.conn_timeout=NetFunnel.TS_CONN_TIMEOUT;this.mConfig.conn_retry=NetFunnel.TS_CONN_RETRY;this.mConfig.cookie_id=NetFunnel.TS_COOKIE_ID;this.mConfig.cookie_time=NetFunnel.TS_COOKIE_TIME;this.mConfig.cookie_domain=NetFunnel.TS_COOKIE_DOMAIN;this.mConfig.showcnt_limit=NetFunnel.TS_SHOWCNT_LIMIT;this.mConfig.showtime_limit=NetFunnel.TS_SHOWTIME_LIMIT;this.mConfig.shownext_limit=NetFunnel.TS_SHOWNEXT_LIMIT;this.mConfig.popup_top=NetFunnel.TS_POPUP_TOP;this.mConfig.popup_left=NetFunnel.TS_POPUP_LEFT;this.mConfig.skin_id=NetFunnel.TS_SKIN_ID;this.mConfig.use_unfocus=NetFunnel.TS_USE_UNFOCUS;this.mConfig.virt_wait=NetFunnel.TS_VIRT_WAIT;this.mConfig.use_mobile_ui=NetFunnel.TS_USE_MOBILE_UI;this.mConfig.mp_use=NetFunnel.MP_USE;this.mConfig.use_frame_block=NetFunnel.TS_USE_FRAME_BLOCK;this.mConfig.frame_block_list=NetFunnel.TS_FRAME_BLOCK_LIST;this.mConfig.use_pre_wait=NetFunnel.TS_USE_PRE_WAIT;this.mConfig.popup_target=NetFunnel.TS_POPUP_TARGET;this.mConfig.user_data=false;this.mConfig.user_data_keys=NetFunnel.TS_USER_DATA_KEYS;this.mConfig.block_msg=NetFunnel.TS_BLOCK_MSG;this.mConfig.block_url=NetFunnel.TS_BLOCK_URL;this.mConfig.ipblock_wait_count=NetFunnel.TS_IPBLOCK_WAIT_COUNT;this.mConfig.ipblock_wait_time=NetFunnel.TS_IPBLOCK_WAIT_TIME;this.mConfig.service_id=NetFunnel.TS_SERVICE_ID;this.mConfig.action_id=NetFunnel.TS_ACTION_ID;this.mConfig.show_wait_popup=NetFunnel.TS_SHOW_WAIT_POPUP;this.mConfig.config_use=NetFunnel.TS_CONFIG_USE;this.mConfig.popup_zindex=NetFunnel.TS_POPUP_ZINDEX;this.mConfig.ip_error_retry=NetFunnel.TS_IP_ERROR_RETRY;this.mConfig._host_changed=false;this.mConfig._port_changed=false;if(typeof e=="object"){for(var f in e){this.mConfig[f]=e[f];if(f=="host"){this.mConfig._host_changed=true}if(f=="port"){this.mConfig._port_changed=true}}}NetFunnel.gPopupLeft=this.mConfig.popup_left;NetFunnel.gPopupTop=this.mConfig.popup_top;NetFunnel.gPopupLeft=this.mConfig.popup_left;NetFunnel.gBlockList=this.mConfig.block_list;if(this.mConfig.skin_id==""){NetFunnel.gSkinId=NetFunnel.TS_SKIN_ID}else{NetFunnel.gSkinId=this.mConfig.skin_id}if(typeof this.mConfig.use_unfocus!="boolean"){if(typeof this.mConfig.use_unfocus=="string"&&this.mConfig.use_unfocus=="true"){this.mConfig.use_unfocus=true}else{this.mConfig.use_unfocus=false}}NetFunnel.gUseUnfocus=this.mConfig.use_unfocus;if(typeof this.mConfig.use_mobile_ui!="boolean"){if(typeof this.mConfig.use_mobile_ui=="string"&&this.mConfig.use_mobile_ui=="true"){this.mConfig.use_mobile_ui=true}else{this.mConfig.use_mobile_ui=false}}NetFunnel.gUseMobileUI=this.mConfig.use_mobile_ui;if(typeof this.mConfig.use_frame_block!="boolean"){if(typeof this.mConfig.use_frame_block=="string"&&this.mConfig.use_frame_block=="true"){this.mConfig.use_frame_block=true}else{this.mConfig.use_frame_block=false}}if(this.mConfig.use_frame_block==true){if(this.mConfig.frame_block_list.length<1){this.mConfig.frame_block_list=NetFunnel.Util.getFrameWindowList(this.mConfig.popup_target)}}else{this.mConfig.frame_block_list=[]}this.id=0;NetFunnel.TsClient._Objects[this.id]=this;NetFunnel.TsClient._Count+=1;if(h.onSuccess){this.addListener(this,"onSuccess",h.onSuccess)}if(h.onContinued){this.addListener(this,"onContinued",h.onContinued)}if(h.onBypass){this.addListener(this,"onBypass",h.onBypass)}if(h.onBlock){this.addListener(this,"onBlock",h.onBlock)}if(h.onIpBlock){this.addListener(this,"onIpBlock",h.onIpBlock)}if(h.onError){this.addListener(this,"onError",h.onError)}if(h.onStop){this.addListener(this,"onStop",h.onStop)}if(h.onExpressnumber){this.addListener(this,"onExpressnumber",h.onExpressnumber)}this.counter[NetFunnel.RTYPE_NONE]=0;this.counter[NetFunnel.RTYPE_GET_TID_CHK_ENTER]=0;this.counter[NetFunnel.RTYPE_GET_TID]=0;this.counter[NetFunnel.RTYPE_CHK_ENTER]=0;this.counter[NetFunnel.RTYPE_ALIVE_NOTICE]=0;this.counter[NetFunnel.RTYPE_SET_COMPLETE]=0;this.counter[NetFunnel.RTYPE_INIT]=0;this.counter[NetFunnel.RTYPE_STOP]=0;this.connTimeout=function g(){if(this!=NetFunnel.gControl){return g.apply(NetFunnel.gControl,arguments)}if(NetFunnel.gAlreadyProc!=0){return false}this._resetScript();if(this.counter[this._mReqType]<this.mConfig.conn_retry){this._mStatus=NetFunnel.PS_TIMEOUT;this.counter[this._mReqType]+=1;switch(this._mReqType){case NetFunnel.RTYPE_GET_TID:this.getTicketID(this.user_id,this.user_tid,false);return true;case NetFunnel.RTYPE_CHK_ENTER:this.chkEnter(this.key,false);return true;case NetFunnel.RTYPE_GET_TID_CHK_ENTER:this.getTidChkEnter(this.user_id,this.user_tid,false);return true;case NetFunnel.RTYPE_ALIVE_NOTICE:this.aliveNotice(this.key,"","",false);return true;case NetFunnel.RTYPE_SET_COMPLETE:this.setComplete(this.key,"","",false);return true;default:}}NetFunnel.PopupUtil.hideWaitPopup();if(this._mReqType==NetFunnel.RTYPE_CHK_ENTER||this._mReqType==NetFunnel.RTYPE_GET_TID_CHK_ENTER){var a=new NetFunnel.Storage(2);a.setItem(this.mConfig.cookie_id,"5002:200:key="+NetFunnel.CONN_TIMEOUT_KEY,1,this.mConfig.cookie_domain)}if(NetFunnel.gAlreadyProc>=1){return false}this.fireEvent(null,this,"onError",{rtype:this._mReqType,code:NetFunnel.kErrorSockConnect,data:{msg:"Connection Timeout"},next:this.next.error});this._mStatus=NetFunnel.PS_ERROR;return true}};NetFunnel.TsClient._Count=0;NetFunnel.TsClient._Objects={};NetFunnel.TsClient.prototype=new NetFunnel.Event();NetFunnel.TsClient.prototype._initDone=false;NetFunnel.TsClient.prototype.id=null;NetFunnel.TsClient.prototype.mConfig=null;NetFunnel.TsClient.prototype.key=null;NetFunnel.TsClient.prototype.script=null;NetFunnel.TsClient.prototype.alarm=null;NetFunnel.TsClient.prototype._mReqType=NetFunnel.RTYPE_NONE;NetFunnel.TsClient.prototype._mMousePos=0;NetFunnel.TsClient.prototype._mNoActTime=0;NetFunnel.TsClient.prototype._mStatus=NetFunnel.PS_N_RUNNING;NetFunnel.TsClient.prototype.counter={};NetFunnel.TsClient.prototype.next={success:"",error:""};NetFunnel.TsClient.prototype.init=function(){this._nCount++;this._initDone=true};NetFunnel.TsClient.prototype.getConfig=function(b){return this.mConfig[b]};NetFunnel.TsClient.prototype._isNoAction=function(){if(this._mMousePos==NetFunnel.MouseX){return true}this._mMousePos=NetFunnel.MouseX;return false};NetFunnel.TsClient.prototype._resetAlarm=function(){if(this.alarm!==null){clearTimeout(this.alarm)}this.alarm=null};NetFunnel.TsClient.prototype._resetRetryTimer=function(){if(this.retryTimer!==null){clearTimeout(this.retryTimer)}this.retryTimer=null};NetFunnel.TsClient.prototype._resetScript=function(){try{if(this.script&&typeof this.script=="object"){var d=this.script.parentNode;if(d&&typeof d=="object"){d.removeChild(this.script)}}}catch(c){}this.script=null};NetFunnel.TsClient.prototype.getUserdata=function(){try{var userdata="";var uKey=this.mConfig.user_data_keys;if(typeof this.mConfig.user_data=="string"){return this.mConfig.user_data}if(Object.prototype.toString.call(uKey).slice(8,-1)!="Array"){return false}for(var i=0;i<uKey.length;i++){var keydata=uKey[i];if(typeof keydata!="object"){continue}if(keydata.type=="v"){try{userdata=eval(keydata.key);if(userdata!=""){break}}catch(e){}}if(keydata.type=="c"){userdata=NetFunnel.Cookie.get(keydata.key);if(userdata!=""){break}}}return userdata}catch(e){return false}};NetFunnel.TsClient.prototype._showResult=function(){this._resetAlarm();if(NetFunnel.gAlreadyProc==1&&NetFunnel.gRtype==NetFunnel.RTYPE_GET_TID_CHK_ENTER){return}NetFunnel.gAlreadyProc=1;NetFunnel.PopupUtil.hideWaitPopup();this.retval=new NetFunnel.RetVal(this.result);if(this.retval.getReqType()==NetFunnel.RTYPE_GET_TID_CHK_ENTER){this.retval.setReqType(NetFunnel.RTYPE_CHK_ENTER)}if(NetFunnel.TS_DEBUG_MODE){NetFunnel.printDebugMsg("recv",this.result)}NetFunnel.ttl=0;this.counter[this._mReqType]=0;if(this.retval.getRetCode()==NetFunnel.kContinueDebug){NetFunnel.gDebugflag=true}else{NetFunnel.gDebugflag=false}switch(this.retval.getReqType()){case NetFunnel.RTYPE_GET_TID:this._showResultGetTicketID(this.retval);break;case NetFunnel.RTYPE_CHK_ENTER:this._showResultChkEnter(this.retval);break;case NetFunnel.RTYPE_ALIVE_NOTICE:this._showResultAliveNotice(this.retval);break;case NetFunnel.RTYPE_SET_COMPLETE:this._showResultSetComplete(this.retval);break;default:var b=new NetFunnel.Storage(2);b.removeItem(this.mConfig.cookie_id);this.fireEvent(null,this,"onError",{rtype:NetFunnel.RTYPE_NONE,code:this.retval.getRetCode(),data:this.retval.getParam(),next:this.next.error});this._mStatus=NetFunnel.PS_ERROR}};NetFunnel.TsClient.prototype._showResultGetTicketID=function(d){var c=new NetFunnel.Storage(2);switch(d.getRetCode()){case NetFunnel.kSuccess:c.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onSuccess",{rtype:d.getReqType(),code:d.getRetCode(),data:d.getParam(),next:this.next.success});break;default:c.removeItem(this.mConfig.cookie_id);this._mStatus=NetFunnel.PS_ERROR;this.fireEvent(null,this,"onError",{rtype:d.getReqType(),code:d.getRetCode(),data:d.getParam(),next:this.next.error})}return};NetFunnel.TsClient.prototype._showResultChkEnter=function(f){var j=this;var h=new NetFunnel.Storage(2);switch(f.getRetCode()){case NetFunnel.kSuccess:h.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this._mStatus=NetFunnel.PS_N_RUNNING;NetFunnel.gNWaitTemp=0;NetFunnel.gNWaitCount=0;this.fireEvent(null,this,"onSuccess",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.success});break;case NetFunnel.kContinueDebug:case NetFunnel.kContinue:this._mStatus=NetFunnel.PS_CONTINUE;var g=f.getNumber("ttl");if(g>this.mConfig.max_ttl){g=this.mConfig.max_ttl;f.setValue("ttl",g)}var i=f.getNumber("nwait");if(NetFunnel.TS_NWAIT_BYPASS){if(NetFunnel.gNWaitTemp==i){NetFunnel.gNWaitCount+=1}else{NetFunnel.gNWaitTemp=i;NetFunnel.gNWaitCount=0}if(NetFunnel.TS_MAX_NWAIT_COUNT<=NetFunnel.gNWaitCount){this.fireEvent(null,this,"onSuccess",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.success});break}}this.fireEvent(null,this,"onContinued",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.continued});NetFunnel.gAlreadyProc=0;if(g>0&&this._mStatus!=NetFunnel.PS_N_RUNNING){if(this.retryTimer){clearTimeout(this.retryTimer)}NetFunnel.ttl=g;this.retryTimer=setTimeout(function(){j.chkEnterCont(j.retval.getValue("key"))},g*1000)}break;case NetFunnel.kTsBlock:this._mStatus=NetFunnel.PS_N_RUNNING;h.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this.fireEvent(null,this,"onBlock",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.block});if(this.retryTimer){clearTimeout(this.retryTimer)}NetFunnel.ttl=g;break;case NetFunnel.kTsIpBlock:this._mStatus=NetFunnel.PS_N_RUNNING;if(this.retryTimer){clearTimeout(this.retryTimer)}this.fireEvent(null,this,"onIpBlock",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.ipblock});NetFunnel.gAlreadyProc=0;if(this.mConfig.ipblock_wait_count>=NetFunnel.gIPBlockWaitCount+1){NetFunnel.gReTimer=setTimeout(function(){j.getTidChkEnter(j.user_id,j.user_tid,true)},this.mConfig.ipblock_wait_time)}else{h.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onSuccess",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.success});break}if(this.mConfig.ipblock_wait_count!=0){NetFunnel.gIPBlockWaitCount+=1}break;case NetFunnel.kTsBypass:this._mStatus=NetFunnel.PS_N_RUNNING;h.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this.fireEvent(null,this,"onBypass",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.bypass});break;case NetFunnel.kTsExpressNumber:this._mStatus=NetFunnel.PS_N_RUNNING;h.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);this.fireEvent(null,this,"onExpressnumber",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.expressnumber});break;default:h.removeItem(this.mConfig.cookie_id);this._mStatus=NetFunnel.PS_ERROR;if(f.getRetCode()==NetFunnel.kTsErrorInvalidIp&&this.mConfig.ip_error_retry==true){NetFunnel.gAlreadyProc=0;this._mStatus=NetFunnel.PS_N_RUNNING;NetFunnel.gReTimer=setTimeout(function(){j.getTidChkEnter(j.user_id,j.user_tid,true,NetFunnel.gTotWait)},100)}else{this._mStatus=NetFunnel.PS_ERROR;this.fireEvent(null,this,"onError",{rtype:f.getReqType(),code:f.getRetCode(),data:f.getParam(),next:this.next.error})}}return};NetFunnel.TsClient.prototype._showResultAliveNotice=function(e){var g=new NetFunnel.Storage(2);switch(e.getRetCode()){case NetFunnel.kSuccess:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onSuccess",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.success});break;case NetFunnel.kContinueDebug:case NetFunnel.kContinue:this._mStatus=NetFunnel.PS_CONTINUE;if(this._mNoActTime>this.mConfig.no_action){this.fireEvent(null,this,"onError",{rtype:e.getReqType(),code:NetFunnel.kTsErrorNoUserAction,data:e.getParam(),next:this.next.error});this._mNoActTime=0;this._mStatus=NetFunnel.PS_ERROR;break}var f=e.getNumber("ttl");if(f>this.mConfig.max_ttl){f=this.mConfig.max_ttl;e.setValue("ttl",f)}this.fireEvent(null,this,"onContinued",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.continued});NetFunnel.gAlreadyProc=0;if(f>0&&this._mStatus!=NetFunnel.PS_N_RUNNING){if(this.retryTimer){clearTimeout(this.retryTimer)}if(this._isNoAction()){this._mNoActTime+=f}else{this._mNoActTime=0}g.setItem(this.mConfig.cookie_id,this.result,this.mConfig.cookie_time,this.mConfig.cookie_domain);var h=this;this.retryTimer=setTimeout(function(){h.aliveNoticeCont(h.retval.getValue("key"),h.retval.getValue("ip"),h.retval.getValue("port"),h.retval.getValue("first"))},f*1000)}break;case NetFunnel.kTsBlock:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onBlock",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.block});break;case NetFunnel.kTsExpressNumber:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onExpressnumber",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.expressnumber});break;case NetFunnel.kTsBypass:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onBypass",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.bypass});break;case NetFunnel.kTsIpBlock:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onIpBlock",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.ipblock});break;default:if(e.getRetCode()==NetFunnel.kErrorExpiredTime){g.removeItem(this.mConfig.cookie_id)}this._mStatus=NetFunnel.PS_ERROR;this.fireEvent(null,this,"onError",{rtype:e.getReqType(),code:e.getRetCode(),data:e.getParam(),next:this.next.error})}return};NetFunnel.TsClient.prototype._showResultSetComplete=function(d){var c=new NetFunnel.Storage(2);c.removeItem(this.mConfig.cookie_id);switch(d.getRetCode()){case NetFunnel.kSuccess:this._mStatus=NetFunnel.PS_N_RUNNING;this.fireEvent(null,this,"onSuccess",{rtype:d.getReqType(),code:d.getRetCode(),data:d.getParam(),next:this.next.success});break;default:this._mStatus=NetFunnel.PS_ERROR;this.fireEvent(null,this,"onError",{rtype:d.getReqType(),code:d.getRetCode(),data:d.getParam(),next:this.next.error})}return};NetFunnel.TsClient.prototype._connInit=function(c){this.result=null;this._mReqType=c;this._resetAlarm();this._resetScript();this._resetRetryTimer();var d=this;this.alarm=setTimeout(function(){d.connTimeout(0)},parseInt(this.mConfig.conn_timeout,10)*1000);if(!this.mConfig.host||this.mConfig.host==""){return false}if(!this.mConfig.port||this.mConfig.port==""){return false}if(!this.mConfig.query||this.mConfig.query==""){return false}if(!this.mConfig.service_id||this.mConfig.service_id==""){return false}if(!this.mConfig.action_id||this.mConfig.action_id==""){return false}this._mStatus=NetFunnel.PS_RUNNING;return true};NetFunnel.TsClient.prototype._sendRequest=function(d){this.script=document.createElement("script");this.script.src=d;var c=document.getElementsByTagName("head").item(0);if(NetFunnel.TS_DEBUG_MODE){NetFunnel.printDebugMsg("send",d)}c.appendChild(this.script);return true};NetFunnel.TsClient.prototype._sendError=function(f,e){var d="";switch(e){case NetFunnel.kErrorAlready:d="Already running";break;case NetFunnel.kErrorNoinit:d="Uninitialized object";break;case NetFunnel.kErrorSystem:default:d="System error"}this.fireEvent(null,this,"onError",{rtype:f,code:e,data:{msg:d},next:this.next.error})};NetFunnel.TsClient.prototype.setNext=function(d){if(typeof d=="object"){this.next=d}else{try{this.next.success=undefined;this.next.continued=undefined;this.next.bypass=undefined;this.next.expressnumber=undefined;this.next.block=undefined;this.next.ipblock=undefined;this.next.error=undefined;this.next.stop=undefined}catch(c){this.next.success=window.undefined;this.next.continued=window.undefined;this.next.bypass=window.undefined;this.next.expressnumber=window.undefined;this.next.block=window.undefined;this.next.ipblock=window.undefined;this.next.error=window.undefined;this.next.stop=window.undefined}}};NetFunnel.TsClient.prototype.sendStop=function(b){if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(b=="undefined"){b=true}if(b){this.counter[NetFunnel.RTYPE_STOP]=0}this._resetAlarm();this._resetRetryTimer();this._resetScript();this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});this._mStatus=NetFunnel.PS_N_RUNNING;return true};NetFunnel.TsClient.prototype.getTicketID=function(j,m,k){NetFunnel.gPrevWaitTime=-1;if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(this.mConfig.use_unfocus==true){NetFunnel.Util.delFocus(this.getConfig("popup_target"))}NetFunnel.gTotWait=-1;NetFunnel.retryData=null;var n=(this.mConfig.mp_use==true)?NetFunnel.MProtect():0;if(n!=0){this.fireEvent(null,this,"onContinued",{rtype:NetFunnel.RTYPE_CHK_ENTER,code:NetFunnel.kContinue,data:{tps:1,eps:2,nwait:(NetFunnel.gControl.getConfig("showcnt_limit")*2),mprotect:n,ttl:10}});if(this.retryTimer){clearTimeout(this.retryTimer)}NetFunnel.retryData={user_id:j,user_tid:m,first:k};var i=this;this.retryTimer=setTimeout(function(){i.retryFunction(NetFunnel.RTYPE_GET_TID)},this.mConfig.virt_wait);return false}if(k=="undefined"){k=true}if(k){this.counter[NetFunnel.RTYPE_GET_TID]=0}if(this._mStatus==NetFunnel.PS_RUNNING){this._sendError(NetFunnel.RTYPE_GET_TID,NetFunnel.kErrorAlready);return false}this.user_id=j;this.user_tid=m;var o=this.mConfig.proto+"://"+this.mConfig.host+":"+this.mConfig.port+"/"+this.mConfig.query+"?opcode="+NetFunnel.RTYPE_GET_TID+"&nfid="+this.id+"&prefix=NetFunnel.gRtype="+NetFunnel.RTYPE_GET_TID+";";o+="&sid="+this.mConfig.service_id+"&aid="+this.mConfig.action_id;var p=this.getUserdata();if(p!=""){o+="&user_data="+p}o+="&js=yes";var l=new Date();o+="&"+l.getTime();if(!this._connInit(NetFunnel.RTYPE_GET_TID)){this._sendError(NetFunnel.RTYPE_GET_TID,NetFunnel.kErrorNoinit);return false}this._sendRequest(o);return true};NetFunnel.TsClient.prototype.chkEnter=function(d,c){if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(this._mStatus==NetFunnel.PS_RUNNING||this._mStatus==NetFunnel.PS_CONTINUE){this._sendError(NetFunnel.RTYPE_CHK_ENTER,NetFunnel.kErrorAlready);return false}return this.chkEnterProc(d,c)};NetFunnel.TsClient.prototype.chkEnterCont=function(d,c){if(this._mStatus==NetFunnel.PS_RUNNING){this._sendError(NetFunnel.RTYPE_CHK_ENTER,NetFunnel.kErrorAlready);return false}return this.chkEnterProc(d,c)};NetFunnel.TsClient.prototype.chkEnterProc=function(m,j){if(j=="undefined"){j=true}if(j){this.counter[NetFunnel.RTYPE_CHK_ENTER]=0}if(!m||m==""){if(this.key){m=this.key}else{this._sendError(NetFunnel.RTYPE_CHK_ENTER,NetFunnel.kErrorParam);return false}}this.key=m;var k=this.retval.getValue("ip");if(this.mConfig.conn_retry>1&&this.counter[this._mReqType]==(this.mConfig.conn_retry)){k=this.mConfig.config_use}var i=this.retval.getValue("port");var n="";if(k&&k!=""&&i&&i!=""&&!this.mConfig.config_use){n=this.mConfig.proto+"://"+k+":"+i+"/"}else{n=this.mConfig.proto+"://"+this.mConfig.host+":"+this.mConfig.port+"/"}n=n+this.mConfig.query+"?opcode="+NetFunnel.RTYPE_CHK_ENTER+"&key="+m+"&nfid="+this.id+"&prefix=NetFunnel.gRtype="+NetFunnel.RTYPE_CHK_ENTER+";";if(NetFunnel.ttl>0){n=n+"&ttl="+NetFunnel.ttl}n+="&sid="+this.mConfig.service_id+"&aid="+this.mConfig.action_id;var h=this.getUserdata();if(h!=""){n+="&user_data="+h}n+="&js=yes";var l=new Date();n+="&"+l.getTime();if(!this._connInit(NetFunnel.RTYPE_CHK_ENTER)){this._sendError(NetFunnel.RTYPE_CHK_ENTER,NetFunnel.kErrorNoinit);return false}this._sendRequest(n);return true};NetFunnel.retryData=null;NetFunnel.retryFunction=function(c){if(typeof NetFunnel.retryData=="object"){var d=NetFunnel.retryData;if(c==NetFunnel.RTYPE_GET_TID){NetFunnel.gControl.getTicketID(d.user_id,d.user_tid,d.first)}else{if(c==NetFunnel.RTYPE_GET_TID_CHK_ENTER){NetFunnel.gControl.getTidChkEnter(d.user_id,d.user_tid,d.first)}}}};NetFunnel.TsClient.prototype.getTidChkEnter=function(g,j,h,i){NetFunnel.gPrevWaitTime=-1;if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(this._mStatus==NetFunnel.PS_RUNNING||this._mStatus==NetFunnel.PS_CONTINUE){this._sendError(NetFunnel.RTYPE_CHK_ENTER,NetFunnel.kErrorAlready);return false}if(this.mConfig.use_unfocus==true){NetFunnel.Util.delFocus(this.getConfig("popup_target"))}NetFunnel.gTotWait=(i==undefined||isNaN(i))?-1:i;NetFunnel.retryData=null;var f=(this.mConfig.mp_use==true)?NetFunnel.MProtect():0;if(f==0&&this.mConfig.show_wait_popup==false){if(this.getConfig("use_pre_wait")){NetFunnel.PopupUtil.showWaitPopup()}return(this.getTidChkEnterProc(g,j,h))}this.fireEvent(null,this,"onContinued",{rtype:NetFunnel.RTYPE_CHK_ENTER,code:NetFunnel.kContinue,data:{tps:1,eps:2,nwait:(NetFunnel.gControl.getConfig("showcnt_limit")*2),mprotect:f,ttl:10}});if(this.retryTimer){clearTimeout(this.retryTimer)}NetFunnel.retryData={user_id:g,user_tid:j,first:h};this.retryTimer=setTimeout(function(){NetFunnel.retryFunction(NetFunnel.RTYPE_GET_TID_CHK_ENTER)},this.mConfig.virt_wait);return false};NetFunnel.TsClient.prototype.getTidChkEnterProc=function(h,k,i){if(i=="undefined"){i=true}if(i){this.counter[NetFunnel.RTYPE_GET_TID_CHK_ENTER]=0}this.user_id=h;this.user_tid=k;var l=this.mConfig.proto+"://"+this.mConfig.host+":"+this.mConfig.port+"/"+this.mConfig.query+"?opcode="+NetFunnel.RTYPE_GET_TID_CHK_ENTER+"&nfid="+this.id+"&prefix=NetFunnel.gRtype="+NetFunnel.RTYPE_GET_TID_CHK_ENTER+";";if(NetFunnel.ttl>0){l=l+"&ttl="+NetFunnel.ttl}l+="&sid="+this.mConfig.service_id+"&aid="+this.mConfig.action_id;l+="&js=yes";var g=this.getUserdata();if(g!=""){l+="&user_data="+g}var j=new Date();l+="&"+j.getTime();if(!this._connInit(NetFunnel.RTYPE_GET_TID_CHK_ENTER)){this._sendError(NetFunnel.RTYPE_GET_TID_CHK_ENTER,NetFunnel.kErrorNoinit);return false}this._sendRequest(l);return true};NetFunnel.TsClient.prototype.aliveNoticeProc=function(m,j,i,k){if(k=="undefined"){k=true}if(k){this.counter[NetFunnel.RTYPE_ALIVE_NOTICE]=0}if(!m||m==""){if(this.key){m=this.key}else{this._sendError(NetFunnel.RTYPE_ALIVE_NOTICE,NetFunnel.kErrorParam);return false}}this.key=m;this.ip=j;this.port=i;if(this.mConfig.conn_retry>1&&(this.counter[this._mReqType]==this.mConfig.conn_retry)){j=this.mConfig.config_use}var n="";if(j&&j!=""&&i&&i!=""&&!this.mConfig.config_use){this.ip=(this.mConfig._host_changed==false)?j:this.mConfig.host;this.port=(this.mConfig._port_changed==false)?i:this.mConfig.port;n=this.mConfig.proto+"://"+this.ip+":"+this.port+"/"}else{n=this.mConfig.proto+"://"+this.mConfig.host+":"+this.mConfig.port+"/"}n=n+this.mConfig.query+"?opcode="+NetFunnel.RTYPE_ALIVE_NOTICE+"&key="+m+"&nfid="+this.id+"&prefix=NetFunnel.gRtype="+NetFunnel.RTYPE_ALIVE_NOTICE+";";n+="&sid="+this.mConfig.service_id+"&aid="+this.mConfig.action_id;var h=this.getUserdata();if(h!=""){n+="&user_data="+h}n+="&js=yes";var l=new Date();n+="&"+l.getTime();if(!this._connInit(NetFunnel.RTYPE_ALIVE_NOTICE)){this._sendError(NetFunnel.RTYPE_ALIVE_NOTICE,NetFunnel.kErrorNoinit);return false}this._sendRequest(n);return true};NetFunnel.TsClient.prototype.aliveNotice=function(e,g,f,h){if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(this._mStatus==NetFunnel.PS_RUNNING||this._mStatus==NetFunnel.PS_CONTINUE){this._sendError(NetFunnel.RTYPE_ALIVE_NOTICE,NetFunnel.kErrorAlready);return false}return this.aliveNoticeProc(e,g,f,h)};NetFunnel.TsClient.prototype.aliveNoticeCont=function(e,g,f,h){if(this._mStatus==NetFunnel.PS_RUNNING){this._sendError(NetFunnel.RTYPE_ALIVE_NOTICE,NetFunnel.kErrorAlready);return false}return this.aliveNoticeProc(e,g,f,h)};NetFunnel.TsClient.prototype.setComplete=function(k,m,o,n){var j=new NetFunnel.Storage();j.setItemStorageOnly("NFMPT.reqCnt","0");if(NetFunnel.TS_BYPASS==true){this.fireEvent(null,this,"onSuccess",{rtype:this._mReqType,code:NetFunnel.kSuccess,data:{},next:this.next.success});return true}if(n=="undefined"){n=true}if(n){this.counter[NetFunnel.RTYPE_SET_COMPLETE]=0}if(this._mStatus==NetFunnel.PS_RUNNING){this._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorAlready);return false}if(!k||k==""){if(this.key){k=this.key}else{this._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorParam);return false}}this.key=k;this.ip=m;if(this.mConfig.conn_retry>1&&this.counter[this._mReqType]==(this.mConfig.conn_retry-1)){m=this.mConfig.config_use}this.port=o;if(k==NetFunnel.CONN_TIMEOUT_KEY){var q=new NetFunnel.RetVal(NetFunnel.RTYPE_SET_COMPLETE+":"+NetFunnel.kSuccess+":utime=1");this._showResultSetComplete(q);return true}var r="";if(m&&m!=""&&o&&o!=""&&!this.mConfig.config_use){this.ip=(this.mConfig._host_changed==false)?m:this.mConfig.host;this.port=(this.mConfig._port_changed==false)?o:this.mConfig.port;r=this.mConfig.proto+"://"+this.ip+":"+this.port+"/"}else{r=this.mConfig.proto+"://"+this.mConfig.host+":"+this.mConfig.port+"/"}r=r+this.mConfig.query+"?opcode="+NetFunnel.RTYPE_SET_COMPLETE+"&key="+k+"&nfid="+this.id+"&prefix=NetFunnel.gRtype="+NetFunnel.RTYPE_SET_COMPLETE+";";var l=this.getUserdata();if(l!=""){r+="&user_data="+l}r+="&js=yes";var p=new Date();r+="&"+p.getTime();if(!this._connInit(NetFunnel.RTYPE_SET_COMPLETE)){this._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorNoinit);return false}this._sendRequest(r);return true};NetFunnel.TsClient.prototype.cookieExist=function(){var g=new NetFunnel.Storage(2);var f=g.getItem(this.mConfig.cookie_id);if(f==false||f==""){return false}var e=new NetFunnel.RetVal(f);var h=e.getValue("key");if(!h){g.removeItem(this.mConfig.cookie_id);return false}return true};NetFunnel.TsClient.prototype.isRunning=function(){if(this._mStatus==NetFunnel.PS_RUNNING||this._mStatus==NetFunnel.PS_CONTINUE){return true}return false};function NetFunnel_init(f,e,d){if(NetFunnel.gControl){NetFunnel.gControl._resetScript();NetFunnel.gControl=null}if(typeof d=="undefined"){d=NetFunnel.DefaultCallback}else{if(!d.onSuccess){d.onSuccess=NetFunnel.DefaultCallback.onSuccess}if(!d.onContinued){d.onContinued=NetFunnel.DefaultCallback.onContinued}if(!d.onError){d.onError=NetFunnel.DefaultCallback.onError}if(!d.onStop){d.onStop=NetFunnel.DefaultCallback.onStop}if(!d.onBypass){d.onBypass=NetFunnel.DefaultCallback.onBypass}if(!d.onBlock){d.onBlock=NetFunnel.DefaultCallback.onBlock}if(!d.onExpressnumber){d.onExpressnumber=NetFunnel.DefaultCallback.onExpressnumber}if(!d.onIpBlock){d.onIpBlock=NetFunnel.DefaultCallback.onIpBlock}}NetFunnel.gControl=new NetFunnel.TsClient(e,d);return true}function NetFunnel_sendStop(d){try{if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;NetFunnel.gControl.setNext(d);NetFunnel.gControl.sendStop();return true}catch(c){return false}}function NetFunnel_getTicketID(f,e,d){if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;NetFunnel.gControl.setNext(f);NetFunnel.gControl.getTicketID(e,d);return true}function NetFunnel_chkEnter(k,j){if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;var l;if(typeof j!="undefined"&&j.constructor==Object){l=j.key;if(!l){return false}}else{var i=new NetFunnel.Storage(2);var h=i.getItem(NetFunnel.gControl.mConfig.cookie_id);if(h===null||h==""){return false}var g=new NetFunnel.RetVal(h);l=g.getValue("key");if(!l){i=new NetFunnel.Storage(2);i.removeItem(this.mConfig.cookie_id);return false}}NetFunnel.gControl.setNext(k);NetFunnel.gControl.chkEnter(l);return true}function NetFunnel_getTidChkEnter(f,e,d){if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;NetFunnel.gControl.setNext(f);NetFunnel.gControl.getTidChkEnter(e,d);return true}function NetFunnel_aliveNotice(m,n){try{if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;var k="";var l="";var q="";if(typeof n!="undefined"&&n.constructor==Object){k=n.key;if(!k){return false}l=n.ip;q=n.port}else{var o=new NetFunnel.Storage(2);var j=o.getItem(NetFunnel.gControl.mConfig.cookie_id);if(j===null||j==""){return false}var r=new NetFunnel.RetVal(j);k=r.getValue("key");if(!k){o.removeItem(this.mConfig.cookie_id);return false}l=r.getValue("ip");q=r.getValue("port")}NetFunnel.gControl.setNext(m);NetFunnel.gControl.aliveNotice(k,l,q);return true}catch(p){return false}}function NetFunnel_setComplete(q,r){if(!NetFunnel.gControl){NetFunnel_init()}NetFunnel.gAlreadyProc=0;NetFunnel.gControl.setNext(q);var m="";var p="";var u="";if(typeof r!="undefined"&&r.constructor==Object){m=r.key;if(!m){NetFunnel.gControl._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorSystem);return false}p=r.ip;u=r.port}else{var s=new NetFunnel.Storage(2);var l=s.getItem(NetFunnel.gControl.mConfig.cookie_id);if(l===null||l==""){NetFunnel.gControl._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorSystem);return false}var v=new NetFunnel.RetVal(l);var o=v.getRetCode();var t=v.getReqType();if(o!=NetFunnel.kSuccess&&o!=NetFunnel.kTsBypass&&!(t==NetFunnel.RTYPE_ALIVE_NOTICE&&o==NetFunnel.kContinue)){var n=new NetFunnel.RetVal(NetFunnel.RTYPE_SET_COMPLETE+':200:msg="Success"');NetFunnel.gControl._showResultSetComplete(n);return true}m=v.getValue("key");if(!m){s=new NetFunnel.Storage(2);s.removeItem(NetFunnel.gControl.mConfig.cookie_id);NetFunnel.gControl._sendError(NetFunnel.RTYPE_SET_COMPLETE,NetFunnel.kErrorSystem);return false}p=v.getValue("ip");u=v.getValue("port")}NetFunnel.gControl.setComplete(m,p,u);return true}function NetFunnel_cookieExist(){if(!NetFunnel.gControl){return false}return NetFunnel.gControl.cookieExist()}function NetFunnel_isRunning(){if(!NetFunnel.gControl){return false}return NetFunnel.gControl.isRunning()}function NetFunnel_goForm(i,j,g){var h=null;if(typeof j=="string"){h=document.getElementById(j);if(typeof h!="object"||h===null){var f=document.getElementsByName(j);h=f[0];if(typeof h!="object"||h===null){alert("[NetFUNNEL] Invalid input form");return false}}}else{if(typeof j=="object"){h=j}else{alert("[NetFUNNEL] Invalid input form");return false}}if(typeof g!="function"){g=function(a,b){return false}}NetFunnel_init(null,i);NetFunnel_getTidChkEnter({success:function(a,b){if(h!==null){h.submit()}},error:function(a,b){if(h!==null){h.submit()}},bypass:function(a,b){if(h!==null){h.submit()}},stop:g});return false}function NetFunnel_goUrl(f,e,d){if(typeof e!="string"){alert("[NetFUNNEL] Invalid input url");return false}if(typeof d!="function"){d=function(a,b){return false}}NetFunnel_init(null,f);NetFunnel_getTidChkEnter({success:e,error:e,bypass:e,stop:d});return false}function NetFunnel_goFunc(f,d,e){if(typeof d!="function"){alert("[NetFUNNEL] Invalid input function");return false}if(typeof e!="function"){e=function(a,b){return false}}NetFunnel_init(null,f);NetFunnel_getTidChkEnter({success:d,error:d,bypass:d,stop:e});return false}function NetFunnel_goComplete(c,d){if(typeof d!="function"){d=function(a,b){return false}}NetFunnel_init(null,c);NetFunnel_setComplete({success:d,error:d,bypass:d});return false}function NetFunnel_goAliveNotice(c,d){if(typeof d!="function"){d=function(a,b){return false}}NetFunnel_init(null,c);NetFunnel_aliveNotice({success:d,error:d,bypass:d});return false}function NetFunnel_Action(q,s){var m=null;var l=s.success;var u=s.continued;var n=s.stop;var o=s.error;var r=s.bypass;var t=s.block;var p=s.ipblock;var v=s.expressnumber;if(typeof s.success=="undefined"){l=s}if(typeof l=="object"){m=l}if(typeof n=="undefined"){n=function(a,b){return false}}if(typeof o=="undefined"){o=l}if(typeof r=="undefined"){r=l}if(typeof v=="undefined"){v=l}NetFunnel_init(null,q);if(m===null){NetFunnel_getTidChkEnter({success:l,error:o,stop:n,bypass:r,block:t,ipblock:p,expressnumber:v,continued:u})}else{NetFunnel_getTidChkEnter({success:function(a,b){if(m!==null){m.submit()}},error:function(a,b){if(m!==null){m.submit()}},bypass:function(a,b){if(m!==null){m.submit()}},expressnumber:function(a,b){if(m!==null){m.submit()}},stop:n,block:t,ipblock:p,continued:u})}return false}function NetFunnel_Complete(c,d){if(typeof d!="function"){d=function(a,b){return false}}NetFunnel_init(null,c);NetFunnel_setComplete({success:d,error:d,bypass:d});return false}function NetFunnel_AliveNotice(o,r){NetFunnel_init(null,o);if(typeof r=="function"){NetFunnel_aliveNotice({success:r,error:r,bypass:r,continued:r})}else{if(typeof r=="object"){var k=r.success;var s=r.continued;var l=r.stop;var m=r.error;var p=r.bypass;var q=r.block;var n=r.ipblock;var t=r.expressnumber;NetFunnel_aliveNotice({success:k,error:m,stop:l,bypass:p,block:q,ipblock:n,expressnumber:t,continued:s})}else{r=function(a,b){return false};NetFunnel_aliveNotice({success:r,error:r,bypass:r,continued:r})}}return false}function DefaultCallback_onSuccess(j,g,i){if(navigator.userAgent.toLowerCase().indexOf("chrome")>0){if(NetFunnel.gPop){var k=i.getConfig("popup_target").document;var l=document.createElement("IMG");l.src="data:image/gif;base64,"+NetFunnel.gFixelData;l.style.position="absolute";l.style.top="-10px";l.style.left="-10px";l.style.display="none";l.onload=function(){g.next(j,g);var a=k.getElementsByTagName("body")[0];a.removeChild(l)};var h=k.getElementsByTagName("body")[0];h.appendChild(l)}else{g.next(j,g)}}else{g.next(j,g)}return false}if(NetFunnel.TS_AUTO_COMPLETE==true){NetFunnel_Complete()};/* melonweb_netfunnel.js */